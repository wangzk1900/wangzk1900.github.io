<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="记录学习总结和思考">
<meta property="og:type" content="website">
<meta property="og:title" content="wangzk1900&#39;s site">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="wangzk1900&#39;s site">
<meta property="og:description" content="记录学习总结和思考">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wangzk1900&#39;s site">
<meta name="twitter:description" content="记录学习总结和思考">





  
  
  <link rel="canonical" href="http://yoursite.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>wangzk1900's site</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wangzk1900's site</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">我的小站</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/24/Servlet_09_JSP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/24/Servlet_09_JSP/" class="post-title-link" itemprop="url">08_JSP</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-24 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-24T00:00:00+08:00">2019-08-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-23 09:25:11" itemprop="dateModified" datetime="2019-08-23T09:25:11+08:00">2019-08-23</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JSP-技术"><a href="#JSP-技术" class="headerlink" title="JSP 技术"></a>JSP 技术</h1><p>JavaServer Pages(JSP) 技术是 Java EE 的一部分，用来生成动态 web 内容（比如：HTML, DHTML, XHTML和XML）。</p>
<p>虽然 Servlet 技术也可以生成动态 web 内容，但是 Servlet 有个最大缺点就是在 Servlet 类中编写大量繁杂的 HTML 代码，使得Java代码与HTML代码糅杂在一起。</p>
<p>JSP 本质也是 Servelt，然而其不需要编译，JSP page 是一个以<code>.jsp</code>扩展名的文本文件。当 JSP page 被用到时，JSP 容器会将 JSP page 转换成 Servlet。</p>
<h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><p><strong>Web Container(JSP container)</strong><br>为 JSP page 和 servlet 组件提供生命周期管理和运行时支持。</p>
<p><strong>JSP Page</strong><br>JSP Page 是基于文本的文档，描述了如何处理请求并创建响应。</p>
<p><strong>JSP Document</strong><br>JSP文档是使用 XML 语法编写的 JSP page，文件的后缀名是：<code>.jspx</code>。<br>专门用于动态生成 XML 内容。</p>
<h1 id="JSP-page内容"><a href="#JSP-page内容" class="headerlink" title="JSP page内容"></a>JSP page内容</h1><p>JSP page 包含两部分：</p>
<ul>
<li>模板数据（基于文本格式的文本，比如：HTML和XML等，是页面的静态部分）</li>
<li>JSP 元素（这部分需要 JSP 容器进行相应的处理，是页面的动态部分）</li>
</ul>
<p>JSP 元素包含下面三类：</p>
<ul>
<li>指令（Directives）</li>
<li>动作（Actions）</li>
<li>脚本元素（Scripting Elements）</li>
</ul>
<h2 id="指令（Directives）"><a href="#指令（Directives）" class="headerlink" title="指令（Directives）"></a>指令（Directives）</h2><p>指令用来配置  JSP 页面的一些基本属性，它们不会产生输出。指令的语法如下：<br><code>&lt;%@ directive { attr=”value” }* %&gt;</code></p>
<table>
<thead>
<tr>
<th>指令</th>
<th>语法</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>Include</td>
<td>&lt;%@ include file=”relativeURLspec” %&gt;</td>
<td>引入指定文件的内容</td>
</tr>
<tr>
<td>Page</td>
<td>&lt;%@ page page_directive_attr_list %&gt;</td>
<td>定义JSP属性</td>
</tr>
<tr>
<td>Taglib</td>
<td>&lt;%@ taglib ( uri=”tagLibraryURI” &#124; tagdir=”tagDir” ) prefix=”tagPrefix” %&gt;</td>
<td>声明JSP使用的标签库或标签文件</td>
</tr>
</tbody></table>
<p><em>示例：</em></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--引入copyright.html文件的内容--&gt;</span><br><span class="line">&lt;%@ include file=<span class="string">"copyright.html"</span> %&gt;</span><br><span class="line">&lt;!--指定page内容和response的编码--&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html; charset=UTF-8"</span> %&gt;</span><br><span class="line">&lt;!--指定JSP page本身的编码--&gt;</span><br><span class="line">&lt;%@ page pageEncoding=<span class="string">"UTF-8"</span> %&gt;</span><br><span class="line">&lt;!--指定标签库--&gt;</span><br><span class="line">&lt;%@ taglib uri=”http:<span class="comment">//www.mycorp/supertags” prefix=”super” %&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="动作（Actions）"><a href="#动作（Actions）" class="headerlink" title="动作（Actions）"></a>动作（Actions）</h2><p>动作元素遵循 XML 元素的语法，分为两种：</p>
<ul>
<li>标准动作元素（由JSP规范提供，由 JSP 容器实现）</li>
<li>自定义动作元素（通过tag扩展机制提供）</li>
</ul>
<p>常用的5个标准动作元素：</p>
<table>
<thead>
<tr>
<th>动作元素</th>
<th>属性</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td><a href="jsp:useBean" target="_blank" rel="noopener">jsp:useBean</a></td>
<td>id, scope, class, beanName, type</td>
<td>指定使用的bean对象</td>
</tr>
<tr>
<td><a href="jsp:setProperty" target="_blank" rel="noopener">jsp:setProperty</a></td>
<td>name, property, param, value</td>
<td>设置bean对象的属性</td>
</tr>
<tr>
<td><a href="jsp:getProperty" target="_blank" rel="noopener">jsp:getProperty</a></td>
<td>name, property</td>
<td>获取bean对象的属性</td>
</tr>
<tr>
<td><a href="jsp:include" target="_blank" rel="noopener">jsp:include</a></td>
<td>page, flush</td>
<td>引入静态或动态资源</td>
</tr>
<tr>
<td><a href="jsp:forward" target="_blank" rel="noopener">jsp:forward</a></td>
<td>page</td>
<td>将当前请求发送到静态资源，JSP 页面或者Servlet。</td>
</tr>
</tbody></table>
<p>标准动作元素的前缀是：jsp，该前缀只能用在标准动作元素上。</p>
<h2 id="脚本元素（Scripting-Elements）"><a href="#脚本元素（Scripting-Elements）" class="headerlink" title="脚本元素（Scripting Elements）"></a>脚本元素（Scripting Elements）</h2><p>在脚本元素中可以编写代码以生成动态内容。</p>
<p>脚本元素有以下三类：<br>| 脚本元素     | 语法                                  | 用途                                                         |<br>| ———— | ————————————- | ———————————————————— |<br>| Declarations | &lt;%! scripting-language-declaration %&gt; | 声明变量或者方法                                             |<br>| Scriptlets   | &lt;% scripting-language-statements %&gt;   | 存放代码（比如：Java代码）                                   |<br>| Expressions  | &lt;%= scripting-language-expression %&gt;  | 将表达式结果转换为字符串并输出。若使用Java语言，则会将字符串通过隐含对象out输出到客户端。 |</p>
<p>使用脚本之前可能需要指定脚本语言（默认是Java），导入所需要的包。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"scripting-language"</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"fully-qualified-classname, packagename.*"</span> %&gt;</span><br></pre></td></tr></table></figure>

<p><em>示例：</em></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--声明变量和方法--&gt;</span><br><span class="line">&lt;%! <span class="keyword">int</span> i; %&gt;</span><br><span class="line">&lt;%! <span class="keyword">int</span> i = <span class="number">0</span>; %&gt;</span><br><span class="line">&lt;%! <span class="function"><span class="keyword">public</span> String <span class="title">f</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123; <span class="keyword">if</span> (i&lt;<span class="number">3</span>) <span class="keyword">return</span>(“...”); ... &#125; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--java 代码--&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span> (Calendar.getInstance().get(Calendar.AM_PM) == Calendar.AM) &#123;%&gt;</span><br><span class="line">Good Morning</span><br><span class="line">&lt;% &#125; <span class="keyword">else</span> &#123; %&gt;</span><br><span class="line">Good Afternoon</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--表达式--&gt;</span><br><span class="line">&lt;%= (<span class="keyword">new</span> java.util.Date()).toLocaleString() %&gt;</span><br></pre></td></tr></table></figure>

<p><em>缺点：</em><br>将业务逻辑和表示逻辑混在一起，增加了JSP page维护的难度，降低了可读性。</p>
<p>JSP 2.0新增的EL表达式可以用来替代脚本元素。</p>
<h1 id="EL表达式"><a href="#EL表达式" class="headerlink" title="EL表达式"></a>EL表达式</h1><p><strong>Unified Expression Language(EL 2.1)</strong><br>从JSP 2.1开始，JSP 2.0和JSF 1.1的表达式语言（Expression Language）被合并到了一起。</p>
<p>包含两部分：</p>
<ul>
<li>JSP 2.0提供的Expression Language</li>
<li>JavaServer Faces技术提供的Expression Language</li>
</ul>
<p>用途：</p>
<ul>
<li>Dynamically read application data stored in JavaBeans components, various data structures, and implicit objects</li>
<li>Dynamically write data, such as user input into forms, to JavaBeans components</li>
<li>Invoke arbitrary static and public methods</li>
<li>Dynamically perform arithmetic operations</li>
</ul>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>提供了两种语法：</p>
<ul>
<li>${} – 立即计算</li>
<li>#{} – 延迟计算</li>
</ul>
<h2 id="隐含对象"><a href="#隐含对象" class="headerlink" title="隐含对象"></a>隐含对象</h2><p>在 JSP page 中，EL 表达式可以访问下面这些隐含的对象，这些对象是 JSP 容器负责创建的：</p>
<ul>
<li><strong>pageContext</strong> – the PageContext object</li>
<li><strong>pageScope</strong> – a Map that maps page-scoped attribute names to their values</li>
<li><strong>requestScope</strong> – a Map that maps request-scoped attribute names to their values</li>
<li><strong>sessionScope</strong> – a Map that maps session-scoped attribute names to their values</li>
<li><strong>applicationScope</strong> – a Map that maps application-scoped attribute names to their values</li>
<li><strong>param</strong> – a Map that maps parameter names to a single String parameter value(obtained by calling ServletRequest.getParameter(String name) )</li>
<li><strong>paramValues</strong> – a Map that maps parameter names to a  String[] of all values for that parameter (obtained by calling  ServletRequest.getParameterValues(Stringname) )</li>
<li><strong>header</strong> – a Map that maps header names to a single String header value (obtained by calling  HttpServletRequest.getHeader(String name) )</li>
<li><strong>headerValues</strong> – a Map that maps header names to a  String[] of all values for that header (obtained by calling  HttpervletRequest.getHeaders(String) )</li>
<li><strong>cookie</strong> – a  Map that maps cookie names to a single  Cookie object. Cookies are retrieved according to the semantics of  HttpServletRequest.getCookies(). If the same name is shared by multiple cookies, an implementation must use the first one encountered in the array of Cookie objects returned by the  getCookies() method. However, users of the cookie implicit object must be aware that the ordering of cookies is currently unspecified in the servlet specification.</li>
<li><strong>initParam</strong> – a  Map that maps context initialization parameter names to their String parameter value (obtained by calling  ServletContext.getInitParameter(String name) )</li>
</ul>
<h1 id="标签扩展"><a href="#标签扩展" class="headerlink" title="标签扩展"></a>标签扩展</h1><p>JSP 规范提供了一种标签扩展机制，通过这种机制可以自定义动作元素，使用自定义的动作元素，可以减少对脚本元素的使用，使 JSP page 更简洁。</p>
<h2 id="标准标签库"><a href="#标准标签库" class="headerlink" title="标准标签库"></a>标准标签库</h2><p>JSP标准标签库（JSTL）是一个JSP标签集合，它封装了 JSP 应用的通用核心功能。标准标签库由 JSP 容器负责实现。</p>
<p>JSTL支持通用的、结构化的任务，比如迭代，条件判断，XML文档操作，国际化标签，SQL标签。 除了这些，它还提供了一个框架来使用集成JSTL的自定义标签。</p>
<p>根据JSTL标签所提供的功能，可以将其分为5个类别。</p>
<ul>
<li>核心标签</li>
<li>格式化标签</li>
<li>SQL 标签</li>
<li>XML 标签</li>
<li>JSTL 函数</li>
</ul>
<h2 id="自定义标签"><a href="#自定义标签" class="headerlink" title="自定义标签"></a>自定义标签</h2><p>自定义标签是用户定义的 JSP 语言元素。当一个包含自定义标签的 JSP page 被转换为 Servlet 时，这些标签会被转化为 tag handler 对象的操作，即当 Servlet 执行时 Web 容器会调用这些操作。</p>
<p>通过继承<code>javax.servlet.jsp.tagext.SimpleTagSupport</code>工具类，并重写<code>doTag()</code>方法来开发一个最简单的自定义标签。</p>
<p>自定义步骤：</p>
<ol>
<li>通过继承<code>SimpleTagSupport</code>类创建处理标签的 Java 类。</li>
<li>创建 TLD 文件（文件名以.tld结尾），将写好的类映射成 JSP 标签。</li>
</ol>
<p>TLD（taglib description）是JSP的标签库描述文件。</p>
<p><em>示例：</em><br>1、创建一个HelloTag类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line">    JspWriter out = getJspContext().getOut();</span><br><span class="line">    out.println(<span class="string">"Hello Custom Tag!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、创建 TLD文件：custom.tld，将其放在 Web 应用的<code>WEB-INF</code>目录下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>Example TLD<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.runoob.HelloTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>empty<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、在 JSP page 中使用自定义标签。<br>我们就可以在JSP文件中使用Hello标签：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"ex"</span> uri=<span class="string">"WEB-INF/custom.tld"</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;A sample custom tag&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;ex:Hello/&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="标签文件（Tag-File）"><a href="#标签文件（Tag-File）" class="headerlink" title="标签文件（Tag File）"></a>标签文件（Tag File）</h1><p>JSP 2.0提供了一种仅用 JSP 语法实现标签扩展的方法，即：使用标签文件来创建标签库。<br>标签文件的后缀名为：<code>.tag</code>或者<code>.tagx</code>。</p>
<p>标签文件存放目录：</p>
<ul>
<li>jar包的<code>/META-INF/tags/</code>目录或其子目录。</li>
<li>war包的<code>/WEB-INF/tags/</code>目录或其子目录。</li>
</ul>
<h1 id="相关资料"><a href="#相关资料" class="headerlink" title="相关资料"></a>相关资料</h1><p><strong>教程：</strong><br><a href="https://docs.oracle.com/javaee/5/tutorial/doc/" target="_blank" rel="noopener">https://docs.oracle.com/javaee/5/tutorial/doc/</a><br><a href="https://www.tutorialspoint.com/jsp/index.htm" target="_blank" rel="noopener">https://www.tutorialspoint.com/jsp/index.htm</a></p>
<p><strong>JSP 规范：</strong><br>JSR 245: JavaServerTM Pages 2.1<br><a href="https://jcp.org/en/jsr/detail?id=245" target="_blank" rel="noopener">https://jcp.org/en/jsr/detail?id=245</a></p>
<p><strong>JSTL 规范：</strong><br>JSR 52: A Standard Tag Library for JavaServer Pages<br><a href="https://jcp.org/en/jsr/detail?id=52" target="_blank" rel="noopener">https://jcp.org/en/jsr/detail?id=52</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/23/Servlet_08_ServletContext/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/23/Servlet_08_ServletContext/" class="post-title-link" itemprop="url">08_ServletContext</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-23 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-23T00:00:00+08:00">2019-08-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-22 10:51:54" itemprop="dateModified" datetime="2019-08-22T10:51:54+08:00">2019-08-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>javax.servlet.ServletContext</code>接口由 Servlet 容器提供者实现。<br>利用<code>ServletContext</code>对象，Servlet 可以记录事件日志，获取 URL，存放属性以供 Context 中的其它 Servlet 访问。</p>
<p>每个部署在容器中的 Web 应用都有一个<code>ServletContext</code>实例与之关联。<br>如果容器是分布式的，那么 Web 应用在每个 JVM 中都有一个<code>ServletContext</code>实例。</p>
<p><strong>初始化参数</strong><br><code>ServletContext</code>接口提供了下面两个方法获取初始化参数信息：</p>
<ul>
<li><strong>getInitParameter</strong>  – 根据参数名称获取参数值。</li>
<li><strong>getInitParameterNames</strong>  – 获取 ServletContext 中可用的参数名称，不包含在web.xml配置的参数。</li>
</ul>
<p><strong>配置方法</strong><br>下面这些方法是从 Servlet 3.0 开始引入的：</p>
<ul>
<li><code>ServletContextListener</code>的<code>contexInitialized</code></li>
<li><code>ServletContainerInitializer</code>的<code>onStartup</code></li>
</ul>
<p>用来定义 Servlet、Filter和 URL pattern，只能在应用被初始化时调用这些方法。</p>
<p>另外，<code>ServletContext</code>接口还提供了添加 Servlet、Filter和 Listener 对象的方法。比如：</p>
<blockquote>
<p>addServlet(String servletName, String className)<br>addFilter(String filterName, String className)<br>void addListener(String className)</p>
</blockquote>
<p><strong>Context 属性</strong><br>Servlet 可以在 Context 中绑定属性，Context 中的其它 Servlet 也可以访问这些属性。</p>
<p>相关的方法：</p>
<ul>
<li>setAttribute</li>
<li>getAttribute</li>
<li>getAttributeNames</li>
<li>removeAttribute</li>
</ul>
<p><strong>资源</strong><br><code>ServletContext</code>接口提供了访问 Web 应用中静态内容文档的方法。</p>
<p>相关的方法：</p>
<ul>
<li>getResource</li>
<li>getResourceAsStream</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/22/Servlet_07_分发请求/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/22/Servlet_07_分发请求/" class="post-title-link" itemprop="url">07_分发请求</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-22 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-22T00:00:00+08:00">2019-08-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-20 15:26:10" itemprop="dateModified" datetime="2019-08-20T15:26:10+08:00">2019-08-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>构建Web应用时，把请求转发给另一个servlet处理、或在response中包含另一个servlet的输出通常是很有用的。<code>RequestDispatcher</code>接口提供了一种机制来实现这种功能。</p>
<p>此接口的主要目的是包装 Servlet，但 Servlet 容器可以创建 RequestDispatcher 对象来包装任何类型的资源。被包装的 Servlet 也被称为目标 Servlet。</p>
<h1 id="获取RequestDispatcher"><a href="#获取RequestDispatcher" class="headerlink" title="获取RequestDispatcher"></a>获取RequestDispatcher</h1><p>使用<code>ServletContext</code>接口的下面两个方法获取 RequestDispatcher：</p>
<ul>
<li><strong>getRequestDispatcher(String path)</strong>  – path 需是基于 ServletContext 根路径的</li>
<li><strong>getNamedDispatcher(String name)</strong> – name 是一个 Servlet 名称，即在web.xml中<code>&lt;servlet-name&gt;</code>标签指定的名称或<code>@WebServlet</code>注解指定的名称。</li>
</ul>
<p>另外，也可以使用<code>ServletRequest</code>接口的<code>getRequestDispatcher(String path)</code>方法。这个方法的 path 参数指定的路径需是相对于当前 Servlet 的。</p>
<h1 id="Include-方法"><a href="#Include-方法" class="headerlink" title="Include 方法"></a>Include 方法</h1><p>用途：将目标 Servlet 输出的内容添加到当前 Servlet 对象的输出中。</p>
<p>该方法可在任何时间被调用，目标 Servlet 可以访问 Request 对象中的所有内容，但它只能把信息写到 Request 对象的<code>ServletOutputStream</code>或<code>Writer</code>中，或提交在最后写保留在response缓冲区中的内容，或通过显式地调用<code>ServletResponse</code>接口的<code>flushBuffer</code>方法。它不能设置响应头部信息或调用任何影响响应头部信息的方法，<code>HttpServletRequest.getSession()</code>和<code>HttpServletRequest.getSession(boolean)</code>方法除外。</p>
<p>当使用<code>getRequestDispatcher(String path)</code>方法获取 RequestDispatcher 对象时，传入入目标 Servlet 的 Request 对象必需设置下面这些属性：</p>
<blockquote>
<p>javax.servlet.include.request_uri<br>javax.servlet.include.context_path<br>javax.servlet.include.servlet_path<br>javax.servlet.include.mapping<br>javax.servlet.include.path_info<br>javax.servlet.include.query_string</p>
</blockquote>
<p>这些属性有什么用？？？</p>
<h1 id="Forward-方法"><a href="#Forward-方法" class="headerlink" title="Forward 方法"></a>Forward 方法</h1><p>用途： 将 Request 对象转发给目标 Servlet 处理。</p>
<p>如果已经访问了 ServletOutputStream 对象或者 PrintWriter 对象，那么就不能调用该方法了。</p>
<p>当使用<code>getRequestDispatcher(String path)</code>方法获取 RequestDispatcher 对象时，传入入目标 Servlet 的 Request 对象必需设置下面这些属性：</p>
<blockquote>
<p>javax.servlet.forward.mapping<br>javax.servlet.forward.request_uri<br>javax.servlet.forward.context_path<br>javax.servlet.forward.servlet_path<br>javax.servlet.forward.path_info<br>javax.servlet.forward.query_string</p>
</blockquote>
<p>通过这些属性，目标 Servlet 可以访问<strong>原始</strong> Request 对象中的请求路径。</p>
<h1 id="Dispatch方法"><a href="#Dispatch方法" class="headerlink" title="Dispatch方法"></a>Dispatch方法</h1><p><code>AsyncContext</code>接口提供了 dispatch 方法，使用该方法可以对请求进行分发。</p>
<ul>
<li><strong>dispatch(path)</strong> – path 需是基于 ServletContext 根路径的</li>
<li><strong>dispatch(servletContext, path)</strong></li>
<li><strong>dispatch()</strong></li>
</ul>
<p>目标 Servlet 可以通过下面这些属性名访问原始 Request 中的路径信息。</p>
<blockquote>
<p>javax.servlet.async.mapping<br>javax.servlet.async.request_uri<br>javax.servlet.async.context_path<br>javax.servlet.async.servlet_path<br>javax.servlet.async.path_info<br>javax.servlet.async.query_string</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/21/Servlet_06_Filter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/21/Servlet_06_Filter/" class="post-title-link" itemprop="url">06_Filter</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-21 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-21T00:00:00+08:00">2019-08-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-20 15:59:48" itemprop="dateModified" datetime="2019-08-20T15:59:48+08:00">2019-08-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="过滤器是什么"><a href="#过滤器是什么" class="headerlink" title="过滤器是什么"></a>过滤器是什么</h1><p>过滤器是一个可以转换请求或响应的报头和内容（或两者）的对象。</p>
<p>过滤器的主要任务：</p>
<ul>
<li>Query the request and act accordingly.</li>
<li>Block the request-and-response pair from passing any further.</li>
<li>Modify the request headers and data. You do this by providing a customized version of the request.</li>
<li>Modify the response headers and data. You do this by providing a customized version of the response.</li>
<li>Interact with external resources.</li>
</ul>
<p>过滤器类型：</p>
<ul>
<li>Authentication filters</li>
<li>Logging and auditing filters</li>
<li>Image conversion filters</li>
<li>Data compression filters</li>
<li>Encryption filters</li>
<li>Tokenizing filters</li>
<li>Filters that trigger resource access events</li>
<li>XSL/T filters that transform XML content</li>
<li>MIME-type chain filters</li>
<li>Caching filters</li>
</ul>
<p>过滤器相关的API主要包括：<code>javax.servlet.Filter</code>，<code>javax.servlet.FilterChain</code>和<code>javax.servlet.FilterConfig</code>。<br>通过实现<code>javax.servlet.Filter</code>接口来定义一个 Filter。</p>
<h1 id="过滤器配置"><a href="#过滤器配置" class="headerlink" title="过滤器配置"></a>过滤器配置</h1><p>Filter 定义完成之后，需要进行相关配置告诉 Servlet 容器这是一个过滤器以及在什么情况下调用这个过滤器。和 Servlet 类一样，有两种配置方式。</p>
<h2 id="使用配置文件"><a href="#使用配置文件" class="headerlink" title="使用配置文件"></a>使用配置文件</h2><p>在web.xml文件使用<code>&lt;filter&gt;</code>和<code>&lt;filter-mapping&gt;</code>标签进行配置。</p>
<p><strong>&lt;filter&gt;标签</strong><br>使用<code>&lt;filter&gt;</code>标签声明一个过滤器，这个标签主要包含下面三个子标签：</p>
<ul>
<li>filter-name : used to map the filter to a servlet or URL</li>
<li>filter-class : used by the container to identify the filter type</li>
<li>init-params : initialization parameters for a filter</li>
</ul>
<p><em>示例：</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Image Filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.example.ImageServlet<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>&lt;filter-mapping&gt;标签</strong><br>使用<code>&lt;filter-mapping&gt;</code>标签指定过滤器需要处理的Servlet或静态资源。</p>
<p><em>示例：</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Image Filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ImageServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Logging Filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>另外，从 Servlet 2.4 开始，增加了一个新特性，就是基于<code>forward()</code>和<code>include()</code>方法调用过滤器。<br>在 <code>&lt;filter-mapping&gt;</code>标签下增加了一个<code>&lt;dispatcher&gt;</code>子标签。可配置的值有下面几个：</p>
<ul>
<li><strong>REQUEST</strong> – 客户端直接发来的请求，匹配<code>&lt;servlet-name&gt;</code>或<code>&lt;url-pattern&gt;</code>时调用过滤器。</li>
<li><strong>FORWARD</strong> – RequestDispatcher匹配<code>&lt;servlet-name&gt;</code>或<code>&lt;url-pattern&gt;</code>，并且用<code>forward()</code>方法处理请求时，调用过滤器。</li>
<li><strong>INCLUDE</strong> – RequestDispatcher匹配<code>&lt;servlet-name&gt;</code>或<code>&lt;url-pattern&gt;</code>，并且用<code>include()</code>方法处理请求时，调用过滤器。</li>
<li><strong>ERROR</strong> – 返回给客户端的error页面匹配<code>&lt;url-pattern&gt;</code>时调用过滤器。</li>
<li><strong>ASYNC</strong> – 当被<code>AsyncContext</code>接口的<code>dispatch</code>方法处理的请求匹配<code>&lt;url-pattern&gt;</code>时调用过滤器。</li>
</ul>
<p><em>示例：</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Logging Filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ProductServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>INCLUDE<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="使用注解配置"><a href="#使用注解配置" class="headerlink" title="使用注解配置"></a>使用注解配置</h2><p>使用<code>@WebFilter</code>注解。</p>
<p><em>示例：</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebInitParam;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebFilter</span>(filterName = <span class="string">"TimeOfDayFilter"</span>,</span><br><span class="line">urlPatterns = &#123;<span class="string">"/*"</span>&#125;,</span><br><span class="line">initParams = &#123;</span><br><span class="line">    <span class="meta">@WebInitParam</span>(name = <span class="string">"mood"</span>, value = <span class="string">"awake"</span>)&#125;</span><br><span class="line">dispatcherTypes= &#123;DispatcherType.INCLUDE&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeOfDayFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/20/Servlet_05_Response/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/20/Servlet_05_Response/" class="post-title-link" itemprop="url">05_Response</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-20 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-20T00:00:00+08:00">2019-08-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-22 15:15:01" itemprop="dateModified" datetime="2019-08-22T15:15:01+08:00">2019-08-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>所有的 Response 类都要实现<code>ServletResponse</code>接口。<br>与 Request 对象一样，Response 对象是由 Servlet 容器负责创建和维护的，并将其传入 Servlet 对象的 <code>service()</code>方法。<br>利用 Response 对象中的方法，我们可以编写响应给客户端的内容，做一些相关的配置。</p>
<h1 id="缓冲（Buffering）"><a href="#缓冲（Buffering）" class="headerlink" title="缓冲（Buffering）"></a>缓冲（Buffering）</h1><p>为了提高效率，可以利用<code>ServletResponse</code>接口提供的一些方法设置缓冲。</p>
<p>相关的方法：</p>
<ul>
<li>getBufferSize</li>
<li>setBufferSize</li>
<li>isCommitted</li>
<li>reset</li>
<li>resetBuffer</li>
<li>flushBuffer</li>
</ul>
<h1 id="响应头（Headers）"><a href="#响应头（Headers）" class="headerlink" title="响应头（Headers）"></a>响应头（Headers）</h1><p>利用<code>HttpServletResponse</code>接口提供的方法可以设置响应头中的信息：</p>
<ul>
<li>setHeader</li>
<li>addHeader</li>
<li>setIntHeader</li>
<li>setDateHeader</li>
<li>addIntHeader</li>
<li>addDateHeader</li>
</ul>
<h1 id="便利方法"><a href="#便利方法" class="headerlink" title="便利方法"></a>便利方法</h1><p><strong>重定向（Redirect）</strong><br>利用<code>HttpServletResponse</code>接口的<code>sendRedirect</code>方法设置适当的响应信息，可以将客户端重定向到不同的URL。</p>
<p><strong>错误信息</strong><br>利用<code>HttpServletResponse</code>接口的<code>sendError</code>方法可以在响应中设置错误信息。</p>
<h1 id="国际化"><a href="#国际化" class="headerlink" title="国际化"></a>国际化</h1><p>编写 Servlet 时，根据不同的地区和语言，应该设置 Response 的区域（locale）和字符编码。<br>区域的默认值由 Servlet 容器默认设置有关，字符编码的默认值是：ISO-8859-1。</p>
<p>在web.xml显式配置区域和字符编码：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--设置区域--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">locale-encoding-mapping-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">locale-encoding-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">locale</span>&gt;</span>ja<span class="tag">&lt;/<span class="name">locale</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>Shift_JIS<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">locale-encoding-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">locale-encoding-mapping-list</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--设置字符编码，对所有response有效--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">response-character-encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">response-character-encoding</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>ServletResponse</code>提供的相关方法：</p>
<ul>
<li>getCharacterEncoding</li>
<li>setCharacterEncoding</li>
<li>getContentType</li>
<li>setContentType</li>
<li>getLocale</li>
<li>setLocale  – 设置区域，并根据web.xml中配置的映射关系或者容器提供的映射关系，设置字符编码。当<code>setCharacterEncoding</code>和<code>setContentType</code>方法都未调用时，该方法设置的字符编码才有效。</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/19/Servlet_04_Request/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/19/Servlet_04_Request/" class="post-title-link" itemprop="url">04_Request</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-19 00:00:00 / 修改时间：14:10:24" itemprop="dateCreated datePublished" datetime="2019-08-19T00:00:00+08:00">2019-08-19</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>所有的 Request 类都要实现<code>ServletRequest</code>接口，<code>HttpServletRequest</code>对象中包含请求URL、HTTP报头、查询字符串等数据。<br>Request 对象是由 Servlet 容器负责创建和维护的，并将其传入 Servlet 对象的 <code>service()</code>方法。<br>利用 Request 对象提供的方法，我们可以获取跟请求相关的数据。</p>
<h1 id="HTTP协议参数"><a href="#HTTP协议参数" class="headerlink" title="HTTP协议参数"></a>HTTP协议参数</h1><p>利用下面的方法可以获取请求参数信息，比如表单中的参数名称和值。<br>■ getParameter<br>■ getParameterNames<br>■ getParameterValues<br>■ getParameterMap</p>
<h1 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h1><p>通过 Request 可以获取表单中<code>multipart/form-data</code>格式的数据，从而实现文件上传的功能。<br>为了使 Servlet 能够处理<code>multipart/form-data</code>格式的数据，需要进行一些额外的配置。</p>
<p><strong>配置方式一：</strong><br>使用web.xml文件，需要在<code>&lt;servlet&gt;</code>标签下使用<code>&lt;multipart-config&gt;</code>进行配置，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>FileUpload<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.my.request.FileUpload<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">multipart-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">location</span>&gt;</span>/tmp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">max-file-size</span>&gt;</span>20848820<span class="tag">&lt;/<span class="name">max-file-size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">max-request-size</span>&gt;</span>418018841<span class="tag">&lt;/<span class="name">max-request-size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file-size-threshold</span>&gt;</span>1048576<span class="tag">&lt;/<span class="name">file-size-threshold</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">multipart-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>配置方式二：</strong><br>使用<code>@MultipartConfig</code>注解，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/FileUpload"</span>)</span><br><span class="line"><span class="meta">@MultipartConfig</span>(location=<span class="string">"/tmp"</span>, fileSizeThreshold=<span class="number">1024</span>*<span class="number">1024</span>,</span><br><span class="line">maxFileSize=<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">5</span>, maxRequestSize=<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">5</span>*<span class="number">5</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileUpload</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="属性（Attributes）"><a href="#属性（Attributes）" class="headerlink" title="属性（Attributes）"></a>属性（Attributes）</h1><p>属性分为两种：<br>一种是 Servlet 容器设置的一些属性。<br>另外，Servlet 也可以设置属性，通过这种方式与其它 Servlet 进行沟通。</p>
<p>在某些情况下，Servlet 规范规定了 Servlet 容器必须设置一些属性。比如，当客户端通过安全协议（比如：HTTPS）发送请求时，Servlet 容器必须设置下面三个属性：</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Attribute Name</th>
<th>Java Type</th>
</tr>
</thead>
<tbody><tr>
<td>cipher suite</td>
<td>javax.servlet.request.cipher_suite</td>
<td>String</td>
</tr>
<tr>
<td>bit size of the algorithm</td>
<td>javax.servlet.request.key_size</td>
<td>Integer</td>
</tr>
<tr>
<td>SSL session id</td>
<td>javax.servlet.request.ssl_session_id</td>
<td>String</td>
</tr>
</tbody></table>
<p>Request 中访问属性的方法：<br>■ getAttribute<br>■ getAttributeNames<br>■ setAttribute</p>
<h1 id="请求头（Headers）"><a href="#请求头（Headers）" class="headerlink" title="请求头（Headers）"></a>请求头（Headers）</h1><p>通过<code>HttpServletRequest</code>接口的方法可以访问 HTTP 请求头中的信息。</p>
<p>相关的方法：<br>■ getHeader<br>■ getHeaders<br>■ getHeaderNames<br>■ getIntHeader<br>■ getDateHeader</p>
<h1 id="请求路径"><a href="#请求路径" class="headerlink" title="请求路径"></a>请求路径</h1><p>一个请求URL包含下面几部分：<br><code>http://[host]:[port][request-path]?[query-string]</code></p>
<p>其中的<code>request-path</code>包含下面三种元素：</p>
<ul>
<li><strong>Context path</strong>: A concatenation of a forward slash ( / ) with the context root of the servlet’s web application.</li>
<li><strong>Servlet path</strong>: The path section that corresponds to the component alias that activated this request. This path starts with a forward slash ( / ).</li>
<li><strong>Path info</strong>: The part of the request path that is not part of the context path or the servlet path.</li>
</ul>
<p><strong>request-path = contextPath + servletPath + pathInfo</strong><br>可以通过<code>getContextPath()</code>，<code>getServletPath()</code>和<code>getPathInfo()</code>方法访问这些信息。</p>
<p>另外，Servlet API 还提供了两个便捷的方法来获取真实的系统路径：<br>■ ServletContext.getRealPath<br>■ HttpServletRequest.getPathTranslated</p>
<h1 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h1><p><code>HttpServletRequest</code>接口提供了<code>getCookies</code>方法来获取 HTTP 请求中的 cookie。</p>
<h1 id="Request-编码"><a href="#Request-编码" class="headerlink" title="Request 编码"></a>Request 编码</h1><p><strong>获取 Request 编码</strong><br>使用<code>getCharacterEncoding()</code>方法，若浏览器发送的请求中没有包含编码信息，则该方法返回 NULL。</p>
<p><strong>设置 Request 编码</strong><br>有三种方法：</p>
<ul>
<li>使用<code>ServletContext</code>中的<code>setRequestCharacterEncoding(String enc)</code>方法。</li>
<li>在 web.xml 文件中使用<code>&lt;request-character-encoding&gt;</code>元素指定。</li>
<li>使用<code>ServletRequest</code>接口中的<code>setCharacterEncoding(String enc)</code>方法。</li>
</ul>
<p><code>setCharacterEncoding(String enc)</code>方法可以覆盖前两种方法设置的值。并且，该方法必须在从 Request 中获取数据之前设置，否则无效。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/18/Servlet_03_Servlet 定义/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/18/Servlet_03_Servlet 定义/" class="post-title-link" itemprop="url">03_Servlet 定义</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-18 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-18T00:00:00+08:00">2019-08-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-20 13:52:03" itemprop="dateModified" datetime="2019-08-20T13:52:03+08:00">2019-08-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在 Web 应用开发中，要定义一个 Servlet 需要继承<code>javax.servlet.http.HttpServlet</code>类。</p>
<p>针对不同的请求，可以定义不同的 Servlet 进行处理。我们需要配置请求和 Servlet 之间的映射关系，否则 Web 容器接收请求之后不知道将请求发送给谁处理。</p>
<p>Servlet 规范提供了两种方式：<br>方式一：在 web.xml 文件中注册 Servlet，并配置 Servlet 和请求路径（URL）的映射关系。<br>方式二：使用<code>@WebServlet</code>注解修饰 Servlet 类，并指定对应的请求路径（URL）。</p>
<p><strong>示例一：</strong>在web.xml文件进行配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee                                               http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>servlet_study_01<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayParameters<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.my.request.DisplayParameters<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DisplayParameters<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/DisplayParameters<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Web 容器会根据<code>&lt;url-pattern&gt;</code>找到对应的<code>&lt;servlet-name&gt;</code>，然后根据<code>&lt;servlet-name&gt;</code>找到对应的<code>&lt;servlet-class&gt;</code>，从而对其进行加载和实例化。</p>
<p><strong>示例二：</strong>使用<code>@WebServlet</code>注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/report"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MoodServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Web 容器把Servlet类加载和实例化之后，会调用<code>init()</code>方法对Servlet进行初始化。<br>我们也可以重写Servlet接口的<code>init()</code>方法，或者在<code>@WebServlet</code>注解中指定<code>initParams</code>属性。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/17/Servlet_02_Servlet 生命周期/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/17/Servlet_02_Servlet 生命周期/" class="post-title-link" itemprop="url">02_Servlet 生命周期</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-17 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-17T00:00:00+08:00">2019-08-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-16 12:25:26" itemprop="dateModified" datetime="2019-08-16T12:25:26+08:00">2019-08-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h1><p>Servlet 生命周期包括从它被加载、实例化到销毁的全过程：</p>
<ul>
<li>加载 Servlet 类并实例化（时机：在 Servlet 被需要时加载，也可以指定在容器启动时加载）</li>
<li>调用<code>init ()</code>方法对 Servlet 进行初始化。</li>
<li>调用<code>service()</code>方法，传入 Request 和 Response 对象，处理来自客户端的请求。</li>
<li>调用<code>destroy()</code>方法释放 Servelet 占用的资源并进行必要的持久化。</li>
</ul>
<p>调用<code>destroy()</code>方法之后，Servlet 容器需要释放这个实例，以便  JVM 的垃圾回收器对其进行回收。</p>
<h2 id="init-方法"><a href="#init-方法" class="headerlink" title="init() 方法"></a>init() 方法</h2><p>在 Servlet 生命周期中，<code>init()</code>方法只会被调用一次。即：在 Servlet 被实例化的时候被调用。</p>
<p>定义init() 方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">  <span class="comment">// Initialization code...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="service-方法"><a href="#service-方法" class="headerlink" title="service() 方法"></a>service() 方法</h2><p>service() 方法是<code>javax.servlet</code>接口中定义的方法。</p>
<p>另外，<code>javax.servlet.http.HttpServlet</code>抽象类中新增了下面这些方法：</p>
<ul>
<li><code>doGet()</code> for handling HTTP  GET requests</li>
<li><code>doPost()</code> for handling HTTP  POST requests</li>
<li><code>doPut()</code> for handling HTTP  PUT requests</li>
<li><code>doDelete()</code> for handling HTTP  DELETE requests</li>
<li><code>doHead()</code> for handling HTTP  HEAD requests</li>
<li><code>doOptions()</code> for handling HTTP  OPTIONS requests</li>
<li><code>doTrace()</code> for handling HTTP  TRACE requests</li>
</ul>
<p>这些方法专门用来处理 HTTP 请求，编写<code>HttpServlet</code>的子类时只需根据客户端的请求类型来重写上面的某些方法。<br><code>service()</code>方法会检查 HTTP 请求类型（GET、POST、PUT、DELETE 等），并在适当的时候调用 <code>doGet()</code>、<code>doPost()</code>、<code>doPut()</code>、<code>doDelete()</code> 等方法。</p>
<p>定义 doGet() 和 doPost() 方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// doGet() 方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">// Servlet code</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// doPost() 方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">// Servlet code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="destroy-方法"><a href="#destroy-方法" class="headerlink" title="destroy() 方法"></a>destroy() 方法</h2><p><code>destroy()</code>方法只在 Servlet  生命周期结束时被调用一次。<code>destroy()</code>方法可以让你的 Servlet 关闭数据库连接、停止后台线程、将 cookie 列表或点击计数器写入磁盘，并执行其他类似的清理活动。</p>
<p>定义destroy() 方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Finalization code...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="生命周期事件"><a href="#生命周期事件" class="headerlink" title="生命周期事件"></a>生命周期事件</h1><p>在Servlet生命周期中，我们可以监控发生的事件并作出反应。</p>
<p>生命周期事件：</p>
<table>
<thead>
<tr>
<th>Object</th>
<th>Event</th>
<th>Listener Interface and Event Class</th>
</tr>
</thead>
<tbody><tr>
<td>Web context</td>
<td>Initialization and destruction</td>
<td>javax.servlet.ServletContextListener and ServletContextEvent</td>
</tr>
<tr>
<td>Web context</td>
<td>Attribute added, removed, or replaced</td>
<td>javax.servlet.ServletContextAttributeListener andServletContextAttributeEvent</td>
</tr>
<tr>
<td>Session</td>
<td>Creation, invalidation, activation, passivation, and timeout</td>
<td>javax.servlet.http.HttpSessionListener,javax.servlet.http.HttpSessionActivationListener, and HttpSessionEvent</td>
</tr>
<tr>
<td>Session</td>
<td>Attribute added, removed, or replaced</td>
<td>javax.servlet.http.HttpSessionAttributeListener andHttpSessionBindingEvent</td>
</tr>
<tr>
<td>Request</td>
<td>A servlet request has started being processed by web components</td>
<td>javax.servlet.ServletRequestListener and ServletRequestEvent</td>
</tr>
<tr>
<td>Request</td>
<td>Attribute added, removed, or replaced</td>
<td>javax.servlet.ServletRequestAttributeListener andServletRequestAttributeEvent</td>
</tr>
</tbody></table>
<p>使用<code>@WebListener</code>注解定义一个监听器，<code>@WebListener</code>注解的类必须实现下面的某个接口：</p>
<blockquote>
<p>javax.servlet.ServletContextListener<br>javax.servlet.ServletContextAttributeListener<br>javax.servlet.ServletRequestListener<br>javax.servlet.ServletRequestAttributeListener<br>javax.servlet..http.HttpSessionListener<br>javax.servlet..http.HttpSessionAttributeListener</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/16/Servlet_01_Servlet 介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/16/Servlet_01_Servlet 介绍/" class="post-title-link" itemprop="url">01_Servlet 介绍</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-16 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-16T00:00:00+08:00">2019-08-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-20 14:10:26" itemprop="dateModified" datetime="2019-08-20T14:10:26+08:00">2019-08-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/" itemprop="url" rel="index"><span itemprop="name">Java EE</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java-EE/Servlet/" itemprop="url" rel="index"><span itemprop="name">Servlet</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Servlet 是什么？</strong><br>Servlet 是基于 java 的 web 组件（Java对象），用来处理客户端请求并动态生成响应内容。<br>Servlet 容器管理这些对象的创建、初始化和销毁。可以使用 Servlet 技术来开发简单的 Web 应用。</p>
<p><strong>Servlet 容器</strong><br>Servlet 容器有时又被称为 Servlet 引擎，是Web服务器或应用程序服务器的一部分。常用的 Servlet 容器有：Tomcat、WebLogic、WebSphere等。</p>
<p><strong>Web 应用</strong></p>
<p>下图是编译、打包（war包）之后 Web 应用的目录结构：<br><img src="/images/servlet/web_module_structure.png" alt="Web Module Structure"><br><code>WEB-INF/classes</code>目录：存放编写的 Servlet 类、Filter类以及各种业务类的class文件；<br><code>WEB-INF/bin</code>目录：存放应用依赖的jar包；<br><code>WEB-INF/web.xml</code>配置文件：包含Web 组件的配置和部署信息；<br><code>Web pages</code>：一般是html、jsp文件，可以被浏览器直接访问。</p>
<p><strong>Servlet 规范</strong><br>JSR 53: Java Servlet 2.3 and JavaServer Pages 1.2 Specifications<br>JSR 154: Java Servlet 2.4 Specification<br>JSR 315: Java Servlet 3.0 Specification<br>JSR 340: Java Servlet 3.1 Specification<br>JSR 369: Java Servlet 4.0 Specification</p>
<p>Servlet 规范（JSR 369）：<a href="https://jcp.org/en/jsr/detail?id=369" target="_blank" rel="noopener">https://jcp.org/en/jsr/detail?id=369</a><br>Servlet 参考实现（RI）：<a href="https://github.com/javaee/servlet-spec" target="_blank" rel="noopener">https://github.com/javaee/servlet-spec</a><br>Collaboration home for Java Servlet Specification：<a href="https://javaee.github.io/servlet-spec/" target="_blank" rel="noopener">https://javaee.github.io/servlet-spec/</a></p>
<p><strong>Servlet API</strong><br>Java 包：<code>javax.servle</code>和<code>javax.servlet.http</code>提供了用来编写 Servlet 的接口和类。</p>
<p>Java(TM) EE 7 Specification APIs：<br><a href="https://docs.oracle.com/javaee/7/api/toc.htm" target="_blank" rel="noopener">https://docs.oracle.com/javaee/7/api/toc.htm</a></p>
<p><strong>相关教程</strong><br>The Java EE 7 Tutorial: <a href="https://docs.oracle.com/javaee/7/tutorial/index.html" target="_blank" rel="noopener">https://docs.oracle.com/javaee/7/tutorial/index.html</a><br>Servlets Tutorial: <a href="https://www.tutorialspoint.com/servlets/" target="_blank" rel="noopener">https://www.tutorialspoint.com/servlets/</a><br>Servlet 教程：<a href="https://www.runoob.com/servlet/servlet-tutorial.html" target="_blank" rel="noopener">https://www.runoob.com/servlet/servlet-tutorial.html</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/24/MySQL安装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/24/MySQL安装/" class="post-title-link" itemprop="url">MySQL安装</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-24 00:00:00 / 修改时间：14:42:15" itemprop="dateCreated datePublished" datetime="2019-07-24T00:00:00+08:00">2019-07-24</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>实验环境</strong><br>虚拟机软件：VMware Workstation 15 Pro<br>虚拟机系统：CentOS Linux release 7.2.1511 (Core)<br>虚拟机内存：4G</p>
<p>MySQL 在 CentOS 上有三种安装方式：</p>
<ul>
<li>使用通用的二进制包进行安装</li>
<li>使用 rpm 包安装</li>
<li>使用源码自行编译安装</li>
</ul>
<h1 id="通用的二进制包"><a href="#通用的二进制包" class="headerlink" title="通用的二进制包"></a>通用的二进制包</h1><p>下载地址：<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a><br>操作系统选择：Linux - Generic</p>
<p>首先，将二进制包上传到/tmp目录下，然后按照下面的步骤进行安装。其中5.7之前和之后的版本在初始化时稍有不同。</p>
<h2 id="版本5-7之前"><a href="#版本5-7之前" class="headerlink" title="版本5.7之前"></a>版本5.7之前</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 卸载系统自带的mariadb</span><br><span class="line">rpm -qa | grep mariadb</span><br><span class="line">rpm -evh --nodeps mariadb-libs-5.5.44-2.el7.centos.x86_64</span><br><span class="line"><span class="meta">#</span># 或者使用yum</span><br><span class="line">yum list installed | grep mariadb</span><br><span class="line">yum -y remove mariadb-libs.x86_64</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建用户和组</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 切换到/tmp目录，解压</span><br><span class="line">cd /tmp</span><br><span class="line">tar zxvf mysql-5.5.62-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line"><span class="meta">#</span>tar zxvf mysql-5.6.44-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 将解压后的目录移动到/usr/local目录下</span><br><span class="line">mv mysql-5.5.62-linux-glibc2.12-x86_64 /usr/local/mysql</span><br><span class="line"><span class="meta">#</span>mv mysql-5.6.44-linux-glibc2.12-x86_64 /usr/local/mysql</span><br><span class="line">chown mysql:mysql -R /usr/local/mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 初始化数据目录</span><br><span class="line">cd /usr/local/mysql/</span><br><span class="line">scripts/mysql_install_db --user=mysql</span><br><span class="line">chown -R root .</span><br><span class="line">chown -R mysql data</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 启动和关闭</span><br><span class="line">cp support-files/my-medium.cnf /etc/my.cnf # 版本5.5</span><br><span class="line">bin/mysqld_safe --user=mysql &amp;</span><br><span class="line">bin/mysqladmin shutdown</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span> 配置MySQL开机自动启动</span><br><span class="line">cp support-files/mysql.server /etc/init.d/mysql.server</span><br><span class="line">chmod 755 /etc/init.d/mysql.server</span><br><span class="line">systemctl enable mysql.server</span><br></pre></td></tr></table></figure>

<h2 id="版本5-7之后"><a href="#版本5-7之后" class="headerlink" title="版本5.7之后"></a>版本5.7之后</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 卸载系统自带的mariadb</span><br><span class="line">rpm -qa | grep mariadb</span><br><span class="line">rpm -evh --nodeps mariadb-libs-5.5.44-2.el7.centos.x86_64</span><br><span class="line"><span class="meta">#</span># 或者使用yum</span><br><span class="line">yum list installed | grep mariadb</span><br><span class="line">yum -y remove mariadb-libs.x86_64</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建用户和组</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 切换到/tmp目录，解压</span><br><span class="line">cd /tmp</span><br><span class="line">tar zxvf mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 将解压后的目录移动到/usr/local目录下</span><br><span class="line">mv mysql-5.7.26-linux-glibc2.12-x86_64 /usr/local/mysql</span><br><span class="line">chown mysql:mysql -R /usr/local/mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 初始化数据目录</span><br><span class="line">cd /usr/local/mysql/</span><br><span class="line">mkdir mysql-files</span><br><span class="line">chmod 750 mysql-files</span><br><span class="line">bin/mysqld --initialize --user=mysql #初始化时会为root@localhost账号生成一个临时密码</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 启动和关闭（关闭时需要输入密码）</span><br><span class="line">bin/mysqld_safe --user=mysql &amp;</span><br><span class="line">bin/mysqladmin shutdown -p</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 配置MySQL开机自动启动</span><br><span class="line">cp support-files/mysql.server /etc/init.d/mysql.server</span><br><span class="line">chmod 755 /etc/init.d/mysql.server</span><br><span class="line">systemctl enable mysql.server</span><br></pre></td></tr></table></figure>

<h2 id="自定义配置"><a href="#自定义配置" class="headerlink" title="自定义配置"></a>自定义配置</h2><p>我们可以自己创建数据库和日志存放目录，配置文件等。在初始化时通过参数指定这些自定义的目录和文件。<br>首先，将安装包上传到<code>/tmp</code>目录，将准备好的配置文件（比如：my3306.cnf）上传到<code>/etc</code>目录下。然后，按照下面的步骤进行安装。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 创建用户和组</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 切换到/tmp目录，解压</span><br><span class="line">cd /tmp</span><br><span class="line">tar zxvf mysql-5.6.44-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 将解压后的目录移动到/usr/local目录下</span><br><span class="line">cp -rf mysql-5.6.44-linux-glibc2.12-x86_64 /usr/local/mysql</span><br><span class="line">chown mysql:mysql -R /usr/local/mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建数据库目录和日志目录</span><br><span class="line">mkdir -p /data/mysql3306/mysql3306</span><br><span class="line">mkdir -p /data/mysql3306/logs</span><br><span class="line">chown mysql:mysql -R /data</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 初始化数据目录</span><br><span class="line">/usr/local/mysql/scripts/mysql_install_db --basedir=/usr/local/mysql/ --datadir=/data/mysql3306/mysql3306 --defaults-file=/etc/my3306.cnf --user=mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 启动服务</span><br><span class="line">/usr/local/mysql/bin/mysqld_safe --defaults-file=/etc/my3306.cnf --user=mysql &amp;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span> 连接数据库</span><br><span class="line">/usr/local/mysql/bin/mysql -S /tmp/mysql3306.sock</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 配置环境变量</span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta">#</span> 添加内容：</span><br><span class="line">export PATH=$PATH:/usr/local/mysql/bin</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span> 配置MySQL开机自动启动</span><br><span class="line">cp support-files/mysql.server /etc/init.d/mysql.server</span><br><span class="line">chmod 755 /etc/init.d/mysql.server</span><br><span class="line">systemctl enable mysql.server</span><br></pre></td></tr></table></figure>

<p><code>my3306.cnf</code>文件的内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">port= 3306</span><br><span class="line">socket= /tmp/mysql3306.sock</span><br><span class="line">secure_auth= false</span><br><span class="line"> </span><br><span class="line">[mysqld]</span><br><span class="line">port= 3306</span><br><span class="line">socket= /tmp/mysql3306.sock</span><br><span class="line">datadir= /data/mysql3306/mysql3306</span><br><span class="line"><span class="meta">#</span>read_only= on</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span>--- GLOBAL ---#</span><br><span class="line">character_set_server    = utf8</span><br><span class="line">lower_case_table_names  = 1</span><br><span class="line">log-output              = FILE</span><br><span class="line">log-error               = /data/mysql3306/logs/mysql-error.log</span><br><span class="line"><span class="meta">#</span>general_log</span><br><span class="line">general_log_file        = /data/mysql3306/logs/mysql.log</span><br><span class="line">pid-file                = /data/mysql3306/mysql.pid</span><br><span class="line">slow-query-log          = 1</span><br><span class="line">slow_query_log_file     = /data/mysql3306/logs/mysql-slow.log</span><br><span class="line">tmpdir                  = /tmp/</span><br><span class="line">long_query_time         = 2</span><br><span class="line">innodb_force_recovery   = 0</span><br><span class="line"><span class="meta">#</span>innodb_buffer_pool_dump_at_shutdown = 1</span><br><span class="line"><span class="meta">#</span>innodb_buffer_pool_load_at_startup = 1</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span>--------------#</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span>thread_concurrency      = 8</span><br><span class="line">thread_cache_size       = 51</span><br><span class="line">table_open_cache        = 16384</span><br><span class="line">open_files_limit        = 65535</span><br><span class="line">table_definition_cache  = 16384</span><br><span class="line">sort_buffer_size        = 2M</span><br><span class="line">join_buffer_size        = 2M</span><br><span class="line">read_buffer_size        = 2M</span><br><span class="line">read_rnd_buffer_size    = 8M</span><br><span class="line">key_buffer_size         = 32M</span><br><span class="line">bulk_insert_buffer_size = 16M</span><br><span class="line">myisam_sort_buffer_size = 64M</span><br><span class="line">tmp_table_size      = 32M</span><br><span class="line">max_heap_table_size     = 16M</span><br><span class="line">query_cache_size       = 32MB</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span>gtid_mode=on</span><br><span class="line"><span class="meta">#</span>log_slave_updates=1</span><br><span class="line"><span class="meta">#</span>enforce_gtid_consistency=1</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span>--- NETWORK ---#</span><br><span class="line">back_log                = 103</span><br><span class="line">max-connections         = 512</span><br><span class="line">max_connect_errors   = 100000</span><br><span class="line">max_allowed_packet      = 32M</span><br><span class="line">interactive_timeout     = 600</span><br><span class="line">wait_timeout            = 600</span><br><span class="line">skip-external-locking</span><br><span class="line"><span class="meta">#</span>max_user_connections    = 0</span><br><span class="line">external-locking        = FALSE</span><br><span class="line"><span class="meta">#</span>skip-name-resolve</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span>--- REPL ---#</span><br><span class="line">server-id               = 28703306</span><br><span class="line">sync_binlog             = 1</span><br><span class="line">log-bin                 = mysql-bin</span><br><span class="line">binlog_format           = row</span><br><span class="line">expire_logs_days        = 10</span><br><span class="line">relay-log               = relay-log</span><br><span class="line">replicate-ignore-db     = test</span><br><span class="line">log_slave_updates       =1</span><br><span class="line"><span class="meta">#</span>skip-slave-start</span><br><span class="line">binlog_cache_size       =4M</span><br><span class="line">max_binlog_cache_size   =8M</span><br><span class="line">max_binlog_size         =1024M</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span>--- INNODB ---#</span><br><span class="line">default_storage_engine          = InnoDB</span><br><span class="line">innodb_data_file_path           = ibdata1:1024M:autoextend</span><br><span class="line">innodb_buffer_pool_size         = 1040M</span><br><span class="line">innodb_buffer_pool_instances    = 1</span><br><span class="line">innodb_additional_mem_pool_size = 16M</span><br><span class="line">innodb_log_files_in_group       = 2</span><br><span class="line">innodb_log_file_size            = 256MB</span><br><span class="line">innodb_log_buffer_size          = 16M</span><br><span class="line">innodb_flush_log_at_trx_commit  = 2</span><br><span class="line">innodb_lock_wait_timeout        = 30</span><br><span class="line">innodb_flush_method             = O_DIRECT</span><br><span class="line">innodb_max_dirty_pages_pct      = 75</span><br><span class="line">innodb_io_capacity              = 200</span><br><span class="line">innodb_thread_concurrency       = 32</span><br><span class="line">innodb_open_files               = 65535</span><br><span class="line">innodb_file_per_table           = 1</span><br><span class="line">transaction_isolation           = REPEATABLE-READ</span><br><span class="line">innodb_locks_unsafe_for_binlog  = 0</span><br><span class="line"><span class="meta">#</span>innodb_purge_thread             = 4</span><br><span class="line">[mysqldump]</span><br><span class="line">quick</span><br><span class="line">max_allowed_packet = 32M</span><br><span class="line"> </span><br><span class="line">[mysql]</span><br><span class="line">auto-rehash</span><br><span class="line"><span class="meta">#</span> Remove the next comment character if you are not familiar with SQL</span><br><span class="line"><span class="meta">#</span>safe-updates</span><br><span class="line">default_character_set=utf8</span><br><span class="line"> </span><br><span class="line">[mysqlhotcopy]</span><br><span class="line">interactive-timeout</span><br></pre></td></tr></table></figure>

<h1 id="使用RPM包安装"><a href="#使用RPM包安装" class="headerlink" title="使用RPM包安装"></a>使用RPM包安装</h1><p>既可以下载 RPM 安装包进行手动安装，也可以通过 yum 工具进行安装。</p>
<h2 id="使用-yum-工具"><a href="#使用-yum-工具" class="headerlink" title="使用 yum 工具"></a>使用 yum 工具</h2><p>前提：虚拟机能够访问互联网。<br>特点：不需要手动卸载系统自带的 MariaDB，yum 工具会自动帮我们卸载。</p>
<h3 id="配置-Yum-Repository"><a href="#配置-Yum-Repository" class="headerlink" title="配置 Yum Repository"></a>配置 Yum Repository</h3><p>首先，下载配置 yum 仓库的 rpm 包：<code>mysql80-community-release-el7-3.noarch.rpm</code><br>下载地址：<a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/repo/yum/</a></p>
<p>然后将其上传到虚拟机的<code>/tmp</code>目录进行安装。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall mysql80-community-release-el7-3.noarch.rpm</span><br><span class="line"><span class="meta">#</span> 确认</span><br><span class="line">yum repolist enabled | grep "mysql.*-community.*"</span><br></pre></td></tr></table></figure>

<p>安装成功后，可以在<code>/etc/yum.repos.d/</code>目录下找到两个新增的的 <code>repo</code> 文件：<code>mysql-community.repo</code> 和 <code>mysql-community-source.repo</code>。<br>默认启用的是最新版本 MySQL 的 Yum Repository，如下所示，是<code>mysql-community.repo</code>文件中的部分内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[mysql57-community]</span><br><span class="line">name=MySQL 5.7 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/$basearch/</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br><span class="line"></span><br><span class="line">[mysql80-community]</span><br><span class="line">name=MySQL 8.0 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/7/$basearch/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></table></figure>

<p>国外的yum源可能会比较慢，最好可以修改为国内的。比如可以将上面5.7的<code>baseurl</code>修改为网易的地址：<a href="http://mirrors.163.com/mysql/Downloads/MySQL-5.7/" target="_blank" rel="noopener">http://mirrors.163.com/mysql/Downloads/MySQL-5.7/</a></p>
<p>若要安装其它版本的 MySQL ，则需要需改上面的配置文件，也可以使用下面的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --disable mysql80-community</span><br><span class="line">yum-config-manager --enable mysql57-community</span><br></pre></td></tr></table></figure>

<h3 id="安装并启动"><a href="#安装并启动" class="headerlink" title="安装并启动"></a>安装并启动</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 用yum安装</span><br><span class="line">yum -y install mysql-community-server</span><br><span class="line"><span class="meta">#</span> 启动MySQL服务</span><br><span class="line">systemctl start mysqld.service</span><br><span class="line"><span class="meta">#</span> 查看服务状态</span><br><span class="line">systemctl status mysqld.service</span><br></pre></td></tr></table></figure>

<p>若查看服务状态时，是下面的结果，说明 MySQL 服务没有设置为开机启动。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# systemctl status mysqld.service</span><br><span class="line">● mysqld.service - MySQL Community Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; disabled; vendor preset: disabled)</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>可使用下面的命令将 MySQL 服务设置为开机启动。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld.service</span><br></pre></td></tr></table></figure>

<h2 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h2><h3 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h3><p>下载地址：<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a><br>操作系统：Red Hat Enterprise Linux / Oracle Linux<br>系统版本：Red Hat Enterprise Linux 7 / Oracle Linux 7 (x86, 64-bit)</p>
<p>可下载的 RPM Bundle：</p>
<blockquote>
<p>MySQL-5.5.62-1.el7.x86_64.rpm-bundle.tar<br>MySQL-5.6.44-1.el7.x86_64.rpm-bundle.tar<br>mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar<br>mysql-8.0.16-2.el7.x86_64.rpm-bundle.tar</p>
</blockquote>
<h3 id="安装并启动-1"><a href="#安装并启动-1" class="headerlink" title="安装并启动"></a>安装并启动</h3><p>首先卸载系统自带的 MariaDB：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 使用rpm卸载</span><br><span class="line">rpm -qa | grep mariadb</span><br><span class="line">rpm -evh --nodeps mariadb-libs-5.5.44-2.el7.centos.x86_64</span><br></pre></td></tr></table></figure>

<p>将下载的安装包上传到虚拟机，并安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 版本5.5</span><br><span class="line">tar -xvf MySQL-5.5.62-1.el7.x86_64.rpm-bundle.tar</span><br><span class="line">rpm -ivh MySQL-server-5.5.62-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh MySQL-client-5.5.62-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 版本5.6</span><br><span class="line">tar xvf MySQL-5.6.44-1.el7.x86_64.rpm-bundle.tar</span><br><span class="line">rpm -ivh MySQL-server-5.6.44-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh MySQL-client-5.6.44-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 版本5.7</span><br><span class="line">tar xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar</span><br><span class="line">rpm -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 版本5.8</span><br><span class="line">tar xvf mysql-8.0.16-2.el7.x86_64.rpm-bundle.tar</span><br><span class="line">rpm -ivh mysql-community-common-8.0.16-2.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-8.0.16-2.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-8.0.16-2.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-server-8.0.16-2.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<p>启动服务：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 5.7之前的版本</span><br><span class="line">mysqld_safe --user=mysql &amp;</span><br><span class="line"><span class="meta">#</span> 5.7版本，及之后的版本</span><br><span class="line">systemctl start mysqld.service</span><br></pre></td></tr></table></figure>

<h1 id="通过源码安装"><a href="#通过源码安装" class="headerlink" title="通过源码安装"></a>通过源码安装</h1><p>有两种方法来使用源码安装MySQL:</p>
<ul>
<li>使用一种标准的MySQL源码安装。标准的可用源码文件被压缩成tar文件，zip文件或RPM包。文件名的格式为mysql-version.tar.gz,mysql-version.zip或mysql-version.rpm。其中version是版本号比例如5.7.25。</li>
<li>使用MySQL开发树。</li>
</ul>
<p>使用源码安装所需的前提条件：</p>
<ul>
<li><code>CMake</code>，用来在所有平台上构建框架，可以从 <a href="http://www.cmake.org" target="_blank" rel="noopener">http://www.cmake.org</a> 来下载<code>CMake</code>。</li>
<li>一个好的make程序，强烈建议使用GNU make 3.75或更高版本。可以从<a href="http://www.gnu.org/software/make/" target="_blank" rel="noopener">http://www.gnu.org/software/make/</a> 下载GNU make。</li>
<li><code>ANSI C++</code>编译器。可以对force_unsupported_compiler的描述。</li>
<li><code>ncurses</code>库，可从 <a href="https://www.gnu.org/software/ncurses/ncurses.html" target="_blank" rel="noopener">https://www.gnu.org/software/ncurses/ncurses.html</a> 下载。</li>
<li>为了构建MySQL需要Boost C++库(但不使用它)。Boost 1.59.0必须被安装。为了获得Boost与它的安装指令，可以访问 <a href="https://www.boost.org/" target="_blank" rel="noopener">https://www.boost.org/</a> 网址。（MySQL 5.7）</li>
<li>足够的空闲内存。</li>
<li>如果要运行测试脚本那么就需要安装<code>perl</code>。大多数类Unix的系统已经包含了<code>perl</code>。在windows上可以使用 ActiveState Perl。</li>
</ul>
<p>如果使用标准源码安装，还需要下面的工具来解压源码文件：</p>
<ul>
<li>对于一个<code>.tar.gz</code>的压缩tar文件，<code>GNU gunzip</code>命令可以用来解压，<code>tar</code>命令用来unpack。如果你的<code>tar</code>命令支持z选项，它可以用来解压与 unpack文件。</li>
<li>对于一个<code>.zip</code>归档文件，winzip或另外的工具可以读取.zip文件。</li>
<li>对于一个<code>.rpm</code>的RPM包，<code>rpmbuild</code>命令用来对构建的发布版本进行unpack操作。</li>
</ul>
<p>若使用开发源码树来安装MySQL，需要安装以下额外的工具:</p>
<ul>
<li>需要Git版本控制系统来获得开发源代码。<a href="https://help.github.com/en" target="_blank" rel="noopener">https://help.github.com/en</a> 提供了指令在不同平台上下载与安装Git。MySQL官方组织已经于2014年9月加入了GitHub。</li>
<li><code>bison 2.1</code>或更高版本，可以从 <a href="http://www.gnu.org/software/bison/" target="_blank" rel="noopener">http://www.gnu.org/software/bison/</a> 网址进行下载(1版本不再支持)，尽可能的使用最新版本。</li>
<li>在Solaris平台上,除了<code>bison</code>之外<code>m4</code>必须被安装。<code>m4</code>可以从 <a href="http://www.gnu.org/software/m4/" target="_blank" rel="noopener">http://www.gnu.org/software/m4/</a> 网址下载。</li>
</ul>
<h2 id="使用标准源码安装"><a href="#使用标准源码安装" class="headerlink" title="使用标准源码安装"></a>使用标准源码安装</h2><p>将源码包<code>mysql-version.tar.gz</code>上传到虚拟机，然后按照下面的步骤进行安装。</p>
<p><strong>5.7之前的版本</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 卸载系统自带的mariadb</span><br><span class="line">rpm -qa | grep mariadb</span><br><span class="line">rpm -evh --nodeps mariadb-libs-5.5.44-2.el7.centos.x86_64</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 安装所需的工具包</span><br><span class="line">yum -y install cmake* make* gcc* gcc-c++ ncurses* ncurses-devel* perl*</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建mysql用户</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 解压并安装</span><br><span class="line">tar zxvf mysql-5.5.62.tar.gz</span><br><span class="line">cd mysql-5.5.62/</span><br><span class="line"><span class="meta">#</span>tar zxvf mysql-5.6.45.tar.gz</span><br><span class="line"><span class="meta">#</span>cd mysql-5.6.45/</span><br><span class="line">mkdir bld</span><br><span class="line">cd bld</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 初始化</span><br><span class="line">cd /usr/local/mysql</span><br><span class="line"></span><br><span class="line">chown -R mysql:mysql .</span><br><span class="line">scripts/mysql_install_db --user=mysql</span><br><span class="line">chown -R root .</span><br><span class="line">chown -R mysql data</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 启动服务</span><br><span class="line">cp support-files/my-medium.cnf /etc/my.cnf #5.5</span><br><span class="line">bin/mysqld_safe --user=mysql &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 配置开机启动</span><br><span class="line">cp support-files/mysql.server /etc/init.d/mysql.server</span><br><span class="line">chmod 755 /etc/init.d/mysql.server</span><br><span class="line">systemctl enable mysql.server</span><br></pre></td></tr></table></figure>

<p><strong>5.7版本</strong></p>
<p>下载<code>boost_1_59_0.tar.gz</code>并上传到虚拟机的<code>/tmp</code>目录。<br>下载地址：<a href="https://jaist.dl.sourceforge.net/project/boost/boost/1.59.0/boost_1_59_0.tar.gz" target="_blank" rel="noopener">https://jaist.dl.sourceforge.net/project/boost/boost/1.59.0/boost_1_59_0.tar.gz</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 卸载系统自带的mariadb</span><br><span class="line">rpm -qa | grep mariadb</span><br><span class="line">rpm -evh --nodeps mariadb-libs-5.5.44-2.el7.centos.x86_64</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 安装所需的工具包</span><br><span class="line">yum -y install cmake* make* gcc* gcc-c++ ncurses* ncurses-devel* perl*</span><br><span class="line">cd /tmp</span><br><span class="line">tar zxvf boost_1_59_0.tar.gz</span><br><span class="line">mv boost_1_59_0 /usr/local/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建mysql用户</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 解压并安装</span><br><span class="line">tar zxvf mysql-5.7.27.tar.gz</span><br><span class="line">cd mysql-5.7.27/</span><br><span class="line">mkdir bld</span><br><span class="line">cd bld</span><br><span class="line">cmake .. -DWITH_BOOST=/usr/local/boost_1_59_0</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 初始化</span><br><span class="line">cd /usr/local/mysql</span><br><span class="line">mkdir mysql-files</span><br><span class="line">chown mysql:mysql mysql-files</span><br><span class="line">bin/mysqld --initialize --user=mysql</span><br><span class="line">bin/mysql_ssl_rsa_setup</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 启动服务</span><br><span class="line">bin/mysqld_safe --user=mysql &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 配置开机启动</span><br><span class="line">cp support-files/mysql.server /etc/init.d/mysql.server</span><br><span class="line">chmod 755 /etc/init.d/mysql.server</span><br><span class="line">systemctl enable mysql.server</span><br></pre></td></tr></table></figure>

<h2 id="使用开发树安装"><a href="#使用开发树安装" class="headerlink" title="使用开发树安装"></a>使用开发树安装</h2><p>从GitHub获取源码进行安装，与使用标准源码安装类似，只是获取源码的方式不一样。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 安装Git</span><br><span class="line">yum -y install git</span><br><span class="line"><span class="meta">#</span> 克隆MySQL仓库到本地</span><br><span class="line">git clone https://github.com/mysql/mysql-server.git</span><br><span class="line"><span class="meta">#</span> 切换到mysql-server目录</span><br><span class="line">cd mysql-server</span><br></pre></td></tr></table></figure>

<h1 id="连接-MySQL"><a href="#连接-MySQL" class="headerlink" title="连接 MySQL"></a>连接 MySQL</h1><p>启动成功之后就可以使用<code>mysql</code>命令进行连接了。<br>MySQL 5.7之前的版本可以在本地直接连接，不需要输入密码。如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mysql</span><br><span class="line">Welcome to the MySQL monitor. Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.5.62 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span><br><span class="line"></span><br><span class="line"><span class="meta">mysql&gt;</span></span><br></pre></td></tr></table></figure>

<p>对于5.7及之后的版本：<br><strong>a)</strong> 若MySQL是通过rpm包安装的，服务在启动时会创建超级账户<code>&#39;root&#39;@&#39;localhost&#39;</code>，并为其生成一个临时的密码，可通过下面的命令进行查看：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 直接连接会报错</span><br><span class="line">[root@localhost ~]# mysql</span><br><span class="line">ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)</span><br><span class="line"><span class="meta">#</span> 查看临时密码</span><br><span class="line">[root@localhost ~]# grep 'temporary password' /var/log/mysqld.log</span><br><span class="line"><span class="meta">#</span> 用root账户连接，需输入密码</span><br><span class="line">[root@localhost ~]# mysql -uroot -p</span><br></pre></td></tr></table></figure>

<p><strong>b)</strong> 若MySQL是通过通用的二进制包或者源码安装的，在初始化的时候会生成一个临时密码，在终端输出的日志中可以看到，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# bin/mysqld --initialize --user=mysql</span><br><span class="line">2019-07-22T08:51:10.366309Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).</span><br><span class="line">2019-07-22T08:51:11.141264Z 0 [Warning] InnoDB: New log files created, LSN=45790</span><br><span class="line">2019-07-22T08:51:11.245915Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class="line">2019-07-22T08:51:11.319143Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: dabbd8fc-ac5d-11e9-8579-000c29562563.</span><br><span class="line">2019-07-22T08:51:11.324567Z 0 [Warning] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.</span><br><span class="line">2019-07-22T08:51:11.329523Z 1 [Note] A temporary password is generated for root@localhost: Zyreghpk3n_s</span><br></pre></td></tr></table></figure>

<p>连接之后，需要将临时密码改掉之后才能进行其它操作：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">ERROR 1820 (HY000): You must <span class="keyword">reset</span> your <span class="keyword">password</span> <span class="keyword">using</span> <span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="keyword">statement</span> <span class="keyword">before</span> executing this statement.</span><br><span class="line">mysql&gt; <span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'MyNewPass4!'</span>;</span><br></pre></td></tr></table></figure>

<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a href="https://dev.mysql.com/doc/refman/5.5/en/" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.5/en/</a><br><a href="https://dev.mysql.com/doc/refman/5.6/en/" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.6/en/</a><br><a href="https://dev.mysql.com/doc/refman/5.7/en/" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/</a><br><a href="https://dev.mysql.com/doc/refman/8.0/en/" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/8.0/en/</a><br><a href="http://www.jydba.net/linux%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E6%9D%A5%E5%AE%89%E8%A3%85mysql-5-7/" target="_blank" rel="noopener">http://www.jydba.net/linux%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E6%9D%A5%E5%AE%89%E8%A3%85mysql-5-7/</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">wangzk1900</p>
              <div class="site-description motion-element" itemprop="description">记录学习总结和思考</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/wangzk1900" title="GitHub &rarr; https://github.com/wangzk1900" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:wangzk1900@gmail.com" title="E-Mail &rarr; mailto:wangzk1900@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wangzk1900</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  



  




  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

    
  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
