<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="构造过程抽象(Building Abstractions with Procedures) 用Lisp编程(Programming in Lisp)List是20世纪50年代后期被发明的是LISt Processing的缩写 程序设计的基本元素(1.1 The Elements of Programming) 强大的语言拥有的三种机制：  基本表达式(primitive expressions)">
<meta property="og:type" content="article">
<meta property="og:title" content="01_构造过程抽象">
<meta property="og:url" content="http://yoursite.com/2019/06/24/SICP笔记_01_构造过程抽象/index.html">
<meta property="og:site_name" content="wangzk1900&#39;s site">
<meta property="og:description" content="构造过程抽象(Building Abstractions with Procedures) 用Lisp编程(Programming in Lisp)List是20世纪50年代后期被发明的是LISt Processing的缩写 程序设计的基本元素(1.1 The Elements of Programming) 强大的语言拥有的三种机制：  基本表达式(primitive expressions)">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/sicp/Figure_1.3.png">
<meta property="og:image" content="http://yoursite.com/images/sicp/Figure_1.4.png">
<meta property="og:image" content="http://yoursite.com/images/sicp/Figure_1.4.png">
<meta property="og:updated_time" content="2019-07-02T07:01:18.626Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="01_构造过程抽象">
<meta name="twitter:description" content="构造过程抽象(Building Abstractions with Procedures) 用Lisp编程(Programming in Lisp)List是20世纪50年代后期被发明的是LISt Processing的缩写 程序设计的基本元素(1.1 The Elements of Programming) 强大的语言拥有的三种机制：  基本表达式(primitive expressions)">
<meta name="twitter:image" content="http://yoursite.com/images/sicp/Figure_1.3.png">





  
  
  <link rel="canonical" href="http://yoursite.com/2019/06/24/SICP笔记_01_构造过程抽象/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>01_构造过程抽象 | wangzk1900's site</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wangzk1900's site</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">我的小站</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/24/SICP笔记_01_构造过程抽象/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangzk1900">
      <meta itemprop="description" content="记录学习总结和思考">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangzk1900's site">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">01_构造过程抽象

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-06-24 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-24T00:00:00+08:00">2019-06-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-02 15:01:18" itemprop="dateModified" datetime="2019-07-02T15:01:18+08:00">2019-07-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SICP笔记/" itemprop="url" rel="index"><span itemprop="name">SICP笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>构造过程抽象(Building Abstractions with Procedures)</p>
<p>用Lisp编程(Programming in Lisp)<br>List<br>是20世纪50年代后期被发明的<br>是LISt Processing的缩写</p>
<h1 id="程序设计的基本元素"><a href="#程序设计的基本元素" class="headerlink" title="程序设计的基本元素"></a>程序设计的基本元素</h1><p>(1.1 The Elements of Programming)</p>
<p>强大的语言拥有的三种机制：</p>
<ol>
<li>基本表达式(primitive expressions)</li>
<li>组合方法(means of combination)</li>
<li>抽象方法(means of abstraction)</li>
</ol>
<p>编程时需要处理两种元素：</p>
<ul>
<li>过程(procedure)–描述处理数据的规则，相当于C语言中的函数，Java中的方法</li>
<li>数据(data)–我们希望去操作的“东西”</li>
</ul>
<h2 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h2><p>(1.1.1 Expressions)</p>
<p><strong>基本表达式(primitive expression)：</strong></p>
<ul>
<li>基本数据(primitive data，比如：1，5，9)</li>
<li>基本过程(primitive procedure，比如：+，-，*，/)</li>
</ul>
<p><strong>组合表达式：</strong><br>由基本表达式组合而成，简称组合式。<br>例如：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">+</span></span> <span class="number">2.7</span> <span class="number">10</span>)</span><br></pre></td></tr></table></figure></p>
<p>最左侧的<code>+</code>号称之为operator，其余的元素称之为operands。这种表示方法称之为prefix notation。<br>这与Java等编程语言不同，在Java语言中操作符是放在操作数之间的。</p>
<p><strong>prefix notation的优缺点：</strong></p>
<p>1、优点<br>不会出现歧义，operator在最左边，位置是固定的，而且表达式的范围由括号界定。比如：(+ 21 35 12 7)。<br>嵌套也很直接，比如：(+ (* 3 5) (- 10 6))</p>
<p>2、缺点<br>有时可读性不太好，例如：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> <span class="number">3</span> (<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> <span class="number">2</span> <span class="number">4</span>) (<span class="name"><span class="builtin-name">+</span></span> <span class="number">3</span> <span class="number">5</span>))) (<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">-</span></span> <span class="number">10</span> <span class="number">7</span>) <span class="number">6</span>))</span><br></pre></td></tr></table></figure></p>
<p>不过，我们可以写成下面的形式来增加可读性：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> <span class="number">3</span></span><br><span class="line">     (<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> <span class="number">2</span> <span class="number">4</span>)</span><br><span class="line">        (<span class="name"><span class="builtin-name">+</span></span> <span class="number">3</span> <span class="number">5</span>)))</span><br><span class="line">   (<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">-</span></span> <span class="number">10</span> <span class="number">7</span>)</span><br><span class="line">      <span class="number">6</span>)) <span class="comment">;同级的过程(这里是运算符)，垂直对齐。</span></span><br></pre></td></tr></table></figure></p>
<h2 id="命名和环境"><a href="#命名和环境" class="headerlink" title="命名和环境"></a>命名和环境</h2><p>(1.1.2 Naming and the Environment)</p>
<p>最简单的抽象方法：定义(define)</p>
<p>定义变量：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> size <span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<p>定义复杂计算的结果：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> pi <span class="number">3.14159</span>)</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> radius <span class="number">10</span>)</span><br><span class="line">(<span class="name"><span class="builtin-name">*</span></span> pi (<span class="name"><span class="builtin-name">*</span></span> radius radius)) <span class="comment">;圆面积</span></span><br><span class="line"><span class="number">314.159</span></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> circumference (<span class="name"><span class="builtin-name">*</span></span> <span class="number">2</span> pi radius)) <span class="comment">;圆周长</span></span><br><span class="line">circumference</span><br><span class="line"><span class="number">62.8318</span></span><br></pre></td></tr></table></figure></p>
<p>定义(define)是最简单的抽象方法，我们可以使用简单的名称来代替复杂的计算性对象。</p>
<p>解释器需要维护额外的内存用来存放“名称-对象”对(name-object pairs)，这部分内存称之为环境(environment)。</p>
<h2 id="组合式求值"><a href="#组合式求值" class="headerlink" title="组合式求值"></a>组合式求值</h2><p>(1.1.3 Evaluating Combinations)</p>
<p>组合式求值规则：<br>对组合式中的各子表达式进行求值；<br>将最左侧的值(operator)应用(apply)在其它的参数(operands)上。(所谓应用，例如：(+ 2.7 10)，就是将<code>+</code>应用在<code>2.7</code>和<code>10</code>上，即计算两个数的和)</p>
<p>define的作用只是将名称和计算性对象关联起来。<br>比如：(define size 2)不是组合式，组合求值规则不适用。</p>
<h2 id="复合过程"><a href="#复合过程" class="headerlink" title="复合过程"></a>复合过程</h2><p>(1.1.4 Compound Procedures)</p>
<p>定义复合过程与定义变量类似，就是给组合操作起一个名字。</p>
<p><strong>定义语法：</strong><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(define (<span class="tag">&lt;<span class="name">name</span>&gt;</span> <span class="tag">&lt;<span class="name">formal</span> <span class="attr">parameters</span>&gt;</span>)</span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span>)</span><br></pre></td></tr></table></figure></p>
<p><strong>示例：</strong><br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;定义计算平方值的过程square</span></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">square</span> x) (<span class="name"><span class="builtin-name">*</span></span> x x))</span><br><span class="line">(<span class="name">square</span> <span class="number">21</span>)</span><br><span class="line"><span class="number">441</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;基于square定义sum-of-squares</span></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sum-of-squares</span> x y)</span><br><span class="line">  (<span class="name"><span class="builtin-name">+</span></span> (<span class="name">square</span> x) (<span class="name">square</span> y)))</span><br><span class="line">(<span class="name">sum-of-squares</span> <span class="number">3</span> <span class="number">4</span>)</span><br><span class="line"><span class="number">25</span></span><br><span class="line"></span><br><span class="line"><span class="comment">;基于sum-of-squares定义f</span></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">f</span> a)</span><br><span class="line">(<span class="name">sum-of-squares</span> (<span class="name"><span class="builtin-name">+</span></span> a <span class="number">1</span>) (<span class="name"><span class="builtin-name">*</span></span> a <span class="number">2</span>)))</span><br><span class="line">(<span class="name">f</span> <span class="number">5</span>)</span><br><span class="line"><span class="number">136</span></span><br></pre></td></tr></table></figure></p>
<h2 id="过程应用的代换模型"><a href="#过程应用的代换模型" class="headerlink" title="过程应用的代换模型"></a>过程应用的代换模型</h2><p>(1.1.5 The Substitution Model for Procedure Application)</p>
<p>代换模型只是用来帮助我们理解过程应用(Procedure Application)过程，并不是解释器的实际工作步骤。</p>
<p>代换模型的一个示例：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">f</span> <span class="number">5</span>) <span class="comment">; 这是上一节中定义的过程</span></span><br><span class="line">(<span class="name">sum-of-squares</span> (<span class="name"><span class="builtin-name">+</span></span> a <span class="number">1</span>) (<span class="name"><span class="builtin-name">*</span></span> a <span class="number">2</span>)) <span class="comment">; 根据f的定义，将f替换为(sum-of-squares (+ a 1) (* a 2)))</span></span><br><span class="line">(<span class="name">sum-of-squares</span> (<span class="name"><span class="builtin-name">+</span></span> <span class="number">5</span> <span class="number">1</span>) (<span class="name"><span class="builtin-name">*</span></span> <span class="number">5</span> <span class="number">2</span>)) <span class="comment">; 将a替换为实际的参数5</span></span><br><span class="line">(<span class="name"><span class="builtin-name">+</span></span> (<span class="name">square</span> <span class="number">6</span>) (<span class="name">square</span> <span class="number">10</span>)) <span class="comment">;根据sum-of-squares的定义，将其替换为(+ (square x) (square y))，并用实际参数值代替x和y</span></span><br><span class="line">(<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> <span class="number">6</span> <span class="number">6</span>) (<span class="name"><span class="builtin-name">*</span></span> <span class="number">10</span> <span class="number">10</span>)) <span class="comment">;根据square的定义，将其替换为(* x x)的形式，并用实际参数值代替x</span></span><br><span class="line">(<span class="name"><span class="builtin-name">+</span></span> <span class="number">36</span> <span class="number">100</span>) <span class="comment">; 分别计算6和10的平方值</span></span><br><span class="line"><span class="number">136</span> <span class="comment">;最终结果</span></span><br></pre></td></tr></table></figure></p>
<p>计算顺序：应用序和正则序<br>Applicative order versus normal order</p>
<p><strong>正则序</strong><br>normal-order evaluation</p>
<p>先全部展开：<br>不断的将形参替换为实际的参数，直到只剩下基本的操作符<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">f</span> <span class="number">5</span>)</span><br><span class="line">(<span class="name">sum-of-squares</span> (<span class="name"><span class="builtin-name">+</span></span> <span class="number">5</span> <span class="number">1</span>) (<span class="name"><span class="builtin-name">*</span></span> <span class="number">5</span> <span class="number">2</span>))</span><br><span class="line">(<span class="name"><span class="builtin-name">+</span></span> (<span class="name">square</span> (<span class="name"><span class="builtin-name">+</span></span> <span class="number">5</span> <span class="number">1</span>)) (<span class="name">square</span> (<span class="name"><span class="builtin-name">*</span></span> <span class="number">5</span> <span class="number">2</span>)) )</span><br><span class="line">(<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> (<span class="name"><span class="builtin-name">+</span></span> <span class="number">5</span> <span class="number">1</span>) (<span class="name"><span class="builtin-name">+</span></span> <span class="number">5</span> <span class="number">1</span>)) (<span class="name"><span class="builtin-name">*</span></span> (<span class="name"><span class="builtin-name">*</span></span> <span class="number">5</span> <span class="number">2</span>) (<span class="name"><span class="builtin-name">*</span></span> <span class="number">5</span> <span class="number">2</span>)))</span><br></pre></td></tr></table></figure></p>
<p>再归约(reduce)：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> <span class="number">6</span> <span class="number">6</span>) (<span class="name"><span class="builtin-name">*</span></span> <span class="number">10</span> <span class="number">10</span>))</span><br><span class="line">(<span class="name"><span class="builtin-name">+</span></span>    <span class="number">36</span>       <span class="number">100</span>)</span><br><span class="line">          <span class="number">136</span></span><br></pre></td></tr></table></figure></p>
<p><strong>应用序</strong><br>applicative-order evaluation</p>
<p>先计算参数值，再应用。避免了重复计算。</p>
<h2 id="条件表达式和谓词"><a href="#条件表达式和谓词" class="headerlink" title="条件表达式和谓词"></a>条件表达式和谓词</h2><p>(1.1.6 Conditional Expressions and Predicates)</p>
<p>之前我们定义的过程的能力比较有限，无法进行判断并根据判断的结果进行不同的操作。</p>
<p>比如要定义一个求绝对值的过程，就需要进行判断。<br>当x&gt;0时，|x|=x<br>当x=0时，|x|=0<br>当x&lt;0时，|x|=-x</p>
<p>条件表达式的一般语法形式：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(cond (<span class="tag">&lt;<span class="name">p1</span>&gt;</span> <span class="tag">&lt;<span class="name">e1</span>&gt;</span>)</span><br><span class="line">      (<span class="tag">&lt;<span class="name">p2</span>&gt;</span> <span class="tag">&lt;<span class="name">e2</span>&gt;</span>)</span><br><span class="line">      ...</span><br><span class="line">      (<span class="tag">&lt;<span class="name">pn</span>&gt;</span> <span class="tag">&lt;<span class="name">en</span>&gt;</span>))</span><br></pre></td></tr></table></figure></p>
<p><code>(&lt;p&gt; &lt;e&gt;)</code>称之为子句(clause)；<br><code>&lt;p&gt;</code>称之为谓词(predicate)，其结果是true或者false；基本的谓词包括：&gt;,&lt;和=<br><code>&lt;e&gt;</code>称之为结果表达式(consequent expression)。</p>
<p>示例：求x的绝对值<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">abs</span></span> x)</span><br><span class="line">  (<span class="name"><span class="builtin-name">cond</span></span> ((<span class="name"><span class="builtin-name">&gt;</span></span> x <span class="number">0</span>) x)</span><br><span class="line">        ((<span class="name"><span class="builtin-name">=</span></span> x <span class="number">0</span>) <span class="number">0</span>)</span><br><span class="line">        ((<span class="name"><span class="builtin-name">&lt;</span></span> x <span class="number">0</span>) (<span class="name"><span class="builtin-name">-</span></span> x))))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">abs</span></span> x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">cond</span></span> ((<span class="name"><span class="builtin-name">&lt;</span></span> x <span class="number">0</span>) (<span class="name"><span class="builtin-name">-</span></span> x))</span><br><span class="line">    (<span class="name"><span class="builtin-name">else</span></span> x))) <span class="comment">; 可使用else替换&lt;p&gt;，此处表示x&gt;0或者x=0</span></span><br></pre></td></tr></table></figure></p>
<p>当仅有两个分支时，可以使用IF表达式<br>(if <predicate> <consequent> <alternative>)</alternative></consequent></predicate></p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">abs</span></span> x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">&lt;</span></span> x <span class="number">0</span>)</span><br><span class="line">    (<span class="name"><span class="builtin-name">-</span></span> x)</span><br><span class="line">    x))</span><br></pre></td></tr></table></figure>
<p>除了可以使用&lt;，=和&gt;，还可以使用逻辑运算符构造复杂的谓词：<br><code>(and &lt;e1&gt; ... &lt;en&gt;)</code><br><code>(or &lt;e1&gt; ... &lt;en&gt;)</code><br><code>(not &lt;e&gt;)</code></p>
<h2 id="实例：采用牛顿法求平方根"><a href="#实例：采用牛顿法求平方根" class="headerlink" title="实例：采用牛顿法求平方根"></a>实例：采用牛顿法求平方根</h2><p>(1.1.7 Example: Square Roots by Newton’s Method)</p>
<p>计算2的平方根的过程：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Guess    Quotient            Average</span><br><span class="line">1       (2/1) = 2            ((2 + 1)/2) = 1.5</span><br><span class="line">1.5     (2/1.5) = 1.3333     ((1.3333 + 1.5)/2) = 1.4167</span><br><span class="line">1.4167  (2/1.4167) = 1.4118  ((1.4167 + 1.4118)/2) = 1.4142</span><br><span class="line">1.4142 ...</span><br></pre></td></tr></table></figure></p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sqrt-iter</span> guess x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">if</span></span> (<span class="name">good-enough?</span> guess x)</span><br><span class="line">        guess</span><br><span class="line">        (<span class="name">sqrt-iter</span> (<span class="name">improve</span> guess x) x)))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">improve</span> guess x)</span><br><span class="line">    (<span class="name">average</span> guess (<span class="name"><span class="builtin-name">/</span></span> x guess)))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">average</span> x y)</span><br><span class="line">    (<span class="name"><span class="builtin-name">/</span></span> (<span class="name"><span class="builtin-name">+</span></span> x y) <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">good-enough?</span> guess x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">&lt;</span></span> (<span class="name"><span class="builtin-name">abs</span></span> (<span class="name"><span class="builtin-name">-</span></span> (<span class="name">square</span> guess) x)) <span class="number">0.001</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">sqrt</span></span> x)</span><br><span class="line">    (<span class="name">sqrt-iter</span> <span class="number">1.0</span> x))  <span class="comment">;从 1 开始猜</span></span><br></pre></td></tr></table></figure>
<h2 id="过程作为黑箱抽象"><a href="#过程作为黑箱抽象" class="headerlink" title="过程作为黑箱抽象"></a>过程作为黑箱抽象</h2><p>(1.1.8 Procedures as Black-Box Abstractions)</p>
<p>计算平方根可以分解为若干个子问题。</p>
<p>过程抽象可以隐藏细节，过程的使用者可以不必知道过程实现的具体细节。</p>
<p>Local names<br>区分不同的过程，与过程定义中的参数名称无关。下边两个定义是相同的：<br>(define (square x) (<em> x x))<br>(define (square y) (</em> y y))</p>
<p>这些参数的有效范围是procedure body。</p>
<p>Internal definitions and block structure<br>为何使用内部定义：<br>1、过程使用者只关心sqrt过程；<br>2、过程名称不能重复，名称一旦使用，别的地方就不能使用了。</p>
<p>因此，可以将过程<code>sqrt</code>专用的过程挪到过程<code>sqrt</code>的body中，这种嵌套定义称之为块结构(block structure)。<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">sqrt</span></span> x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">good-enough?</span> guess x)</span><br><span class="line">        (<span class="name"><span class="builtin-name">&lt;</span></span> (<span class="name"><span class="builtin-name">abs</span></span> (<span class="name"><span class="builtin-name">-</span></span> (<span class="name">square</span> guess) x)) <span class="number">0.001</span>))</span><br><span class="line">    (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">improve</span> guess x) (<span class="name">average</span> guess (<span class="name"><span class="builtin-name">/</span></span> x guess)))</span><br><span class="line">    (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sqrt-iter</span> guess x)</span><br><span class="line">        (<span class="name"><span class="builtin-name">if</span></span> (<span class="name">good-enough?</span> guess x)</span><br><span class="line">        guess</span><br><span class="line">        (<span class="name">sqrt-iter</span> (<span class="name">improve</span> guess x) x)))</span><br><span class="line">    (<span class="name">sqrt-iter</span> <span class="number">1.0</span> x))</span><br></pre></td></tr></table></figure></p>
<p>上面的过程定义直接将子过程放到了<code>sqrt</code>过程的body中。<br>但是，子过程<code>good-enough?</code>、<code>improve</code>和<code>sqrt-iter</code>就没必要再显式的向自身传递参数 x 了，因为它们已经在参数 x 的有效范围内了。<br>下面是完善后的过程定义：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">sqrt</span></span> x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">good-enough?</span> guess)</span><br><span class="line">        (<span class="name"><span class="builtin-name">&lt;</span></span> (<span class="name"><span class="builtin-name">abs</span></span> (<span class="name"><span class="builtin-name">-</span></span> (<span class="name">square</span> guess) x)) <span class="number">0.001</span>))</span><br><span class="line">    (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">improve</span> guess)</span><br><span class="line">        (<span class="name">average</span> guess (<span class="name"><span class="builtin-name">/</span></span> x guess)))</span><br><span class="line">    (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sqrt-iter</span> guess)</span><br><span class="line">        (<span class="name"><span class="builtin-name">if</span></span> (<span class="name">good-enough?</span> guess)</span><br><span class="line">            guess</span><br><span class="line">           (<span class="name">sqrt-iter</span> (<span class="name">improve</span> guess))))</span><br><span class="line">    (<span class="name">sqrt-iter</span> <span class="number">1.0</span>))  <span class="comment">;从 1 开始猜</span></span><br></pre></td></tr></table></figure></p>
<h1 id="过程与它们所产生的计算步骤"><a href="#过程与它们所产生的计算步骤" class="headerlink" title="过程与它们所产生的计算步骤"></a>过程与它们所产生的计算步骤</h1><p>(1.2 Procedures and the Processes They Generate)</p>
<h2 id="线性的递归和迭代"><a href="#线性的递归和迭代" class="headerlink" title="线性的递归和迭代"></a>线性的递归和迭代</h2><p>(1.2.1 Linear Recursion and Iteration)</p>
<p>计算 n 的阶乘有两种思路。</p>
<p><strong>思路一：</strong>n的阶乘等于n乘以n-1的阶乘，而n-1的阶乘等于n-1乘以n-2的阶乘……<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">factorial</span> n)</span><br><span class="line">    (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">=</span></span> n <span class="number">1</span>)</span><br><span class="line">        <span class="number">1</span></span><br><span class="line">        (<span class="name"><span class="builtin-name">*</span></span> n (<span class="name">factorial</span> (<span class="name"><span class="builtin-name">-</span></span> n <span class="number">1</span>)))))</span><br></pre></td></tr></table></figure></p>
<p>计算6的阶乘的递归过程：<br><img src="/images/sicp/Figure_1.3.png" alt="线性递归"><br>This type of process, characterized by a chain of deferred operations, is called a recursive process.</p>
<p><strong>思路二：</strong>首先将1乘以2得出一个结果，然后用这个结果再乘以3，如此往复直到乘以n得出最终的结果。<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">factorial</span> n)</span><br><span class="line">    (<span class="name">fact-iter</span> <span class="number">1</span> <span class="number">1</span> n))</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">fact-iter</span> product counter max-count)</span><br><span class="line">    (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">&gt;</span></span> counter max-count)</span><br><span class="line">        product</span><br><span class="line">       (<span class="name">fact-iter</span> (<span class="name"><span class="builtin-name">*</span></span> counter product)</span><br><span class="line">                  (<span class="name"><span class="builtin-name">+</span></span> counter <span class="number">1</span>)</span><br><span class="line">                  max-count)))</span><br></pre></td></tr></table></figure></p>
<p>计算6的阶乘的的迭代过程：<br><img src="/images/sicp/Figure_1.4.png" alt="线性迭代"><br>In general, an iterative process is one whose state can be summarized by a fixed number of state variables, together with a fixed rule that describes how the state variables should be updated as the process moves from state to state and an (optional) end test that specifies conditions under which the process should terminate.</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">factorial</span> n)</span><br><span class="line">    (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">iter</span> product counter)</span><br><span class="line">        (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">&gt;</span></span> counter n)</span><br><span class="line">        product</span><br><span class="line">        (<span class="name">iter</span> (<span class="name"><span class="builtin-name">*</span></span> counter product)</span><br><span class="line">              (<span class="name"><span class="builtin-name">+</span></span> counter <span class="number">1</span>))))</span><br><span class="line">    (<span class="name">iter</span> <span class="number">1</span> <span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<h2 id="树形递归"><a href="#树形递归" class="headerlink" title="树形递归"></a>树形递归</h2><p>(1.2.2 Tree Recursion)</p>
<p>计算斐波那契数也有两种思路。</p>
<p><strong>思路一：</strong>递归<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">fib</span> n)</span><br><span class="line">    (<span class="name"><span class="builtin-name">cond</span></span> ((<span class="name"><span class="builtin-name">=</span></span> n <span class="number">0</span>) <span class="number">0</span>)</span><br><span class="line">          ((<span class="name"><span class="builtin-name">=</span></span> n <span class="number">1</span>) <span class="number">1</span>)</span><br><span class="line">          (<span class="name"><span class="builtin-name">else</span></span> (<span class="name"><span class="builtin-name">+</span></span> (<span class="name">fib</span> (<span class="name"><span class="builtin-name">-</span></span> n <span class="number">1</span>))</span><br><span class="line">                   (<span class="name">fib</span> (<span class="name"><span class="builtin-name">-</span></span> n <span class="number">2</span>))))))</span><br></pre></td></tr></table></figure></p>
<p>计算(fib 5)的树形递归过程：<br><img src="/images/sicp/Figure_1.4.png" alt="树形递归"><br>有重复的计算！</p>
<p><strong>思路二：</strong>首先初始化fib(0)=0，fib(1)=1，然后计算fib(3)=fib(0)+fib(1)，如此重复，直到f(n)=f(n-2)+f(n-1)。<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">fib</span> n)</span><br><span class="line">    (<span class="name">fib-iter</span> <span class="number">1</span> <span class="number">0</span> n))</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">fib-iter</span> a b count)</span><br><span class="line">    (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">=</span></span> count <span class="number">0</span>)</span><br><span class="line">        b</span><br><span class="line">        (<span class="name">fib-iter</span> (<span class="name"><span class="builtin-name">+</span></span> a b) a (<span class="name"><span class="builtin-name">-</span></span> count <span class="number">1</span>))))</span><br></pre></td></tr></table></figure></p>
<h2 id="增长的阶"><a href="#增长的阶" class="headerlink" title="增长的阶"></a>增长的阶</h2><p>(1.2.3 Orders of Growth)</p>
<h2 id="求幂"><a href="#求幂" class="headerlink" title="求幂"></a>求幂</h2><p>(1.2.4 Exponentiation)</p>
<p>求b的n次幂.</p>
<p>递归：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">expt</span></span> b n)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">=</span></span> n <span class="number">0</span>)</span><br><span class="line">      <span class="number">1</span></span><br><span class="line">      (<span class="name"><span class="builtin-name">*</span></span> b (<span class="name"><span class="builtin-name">expt</span></span> b (<span class="name"><span class="builtin-name">-</span></span> n <span class="number">1</span>)))))</span><br></pre></td></tr></table></figure></p>
<p>迭代：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">expt</span></span> b n)</span><br><span class="line">    (<span class="name">expt-iter</span> b n <span class="number">1</span>))</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">expt-iter</span> b count product)</span><br><span class="line">    (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">=</span></span> count <span class="number">0</span>)</span><br><span class="line">         product</span><br><span class="line">         (<span class="name">expt-iter</span> b (<span class="name"><span class="builtin-name">-</span></span> count <span class="number">1</span>) (<span class="name"><span class="builtin-name">*</span></span> b product))))</span><br></pre></td></tr></table></figure></p>
<p>连续平方：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">fast-expt</span> b n)</span><br><span class="line">  (<span class="name"><span class="builtin-name">cond</span></span> ((<span class="name"><span class="builtin-name">=</span></span> n <span class="number">0</span>) <span class="number">1</span>)</span><br><span class="line">        ((<span class="name"><span class="builtin-name">even?</span></span> n) (<span class="name">square</span> (<span class="name">fast-expt</span> b (<span class="name"><span class="builtin-name">/</span></span> n <span class="number">2</span>))))</span><br><span class="line">        (<span class="name"><span class="builtin-name">else</span></span> (<span class="name"><span class="builtin-name">*</span></span> b (<span class="name">fast-expt</span> b (<span class="name"><span class="builtin-name">-</span></span> n <span class="number">1</span>))))))</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">even?</span></span> n)</span><br><span class="line">  (<span class="name"><span class="builtin-name">=</span></span> (<span class="name"><span class="builtin-name">remainder</span></span> n <span class="number">2</span>) <span class="number">0</span>))</span><br></pre></td></tr></table></figure></p>
<h2 id="最大公约数"><a href="#最大公约数" class="headerlink" title="最大公约数"></a>最大公约数</h2><p>(1.2.5 Greatest Common Divisors)</p>
<p>求两个整数的最大公约数：欧几里德算法</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">gcd</span></span> a b)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">=</span></span> b <span class="number">0</span>)</span><br><span class="line">      a</span><br><span class="line">      (<span class="name"><span class="builtin-name">gcd</span></span> b (<span class="name"><span class="builtin-name">remainder</span></span> a b))))</span><br></pre></td></tr></table></figure>
<h2 id="实例：素数检测"><a href="#实例：素数检测" class="headerlink" title="实例：素数检测"></a>实例：素数检测</h2><p>(1.2.6 Example: Testing for Primality)</p>
<p>本章介绍了两种检测给定整数是否是素数的方法。</p>
<p><strong>方法一：</strong>寻找除数，若给定的整数能被某个整数（1和它本身除外）整除，则这个整数就不是素数。<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">smallest-divisor</span> n) (<span class="name">find-divisor</span> n <span class="number">2</span>)) <span class="comment">;从2开始查找n的最小整除数</span></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">find-divisor</span> n test-divisor)</span><br><span class="line">  (<span class="name"><span class="builtin-name">cond</span></span> ((<span class="name"><span class="builtin-name">&gt;</span></span> (<span class="name">square</span> test-divisor) n) n) <span class="comment">;若n能被d整除，则d和n/d不可能都比n的平方根大</span></span><br><span class="line">        ((<span class="name">divides?</span> test-divisor n) test-divisor)</span><br><span class="line">        (<span class="name"><span class="builtin-name">else</span></span> (<span class="name">find-divisor</span> n (<span class="name"><span class="builtin-name">+</span></span> test-divisor <span class="number">1</span>)))))</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">divides?</span> a b) (<span class="name"><span class="builtin-name">=</span></span> (<span class="name"><span class="builtin-name">remainder</span></span> b a) <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">prime?</span> n)</span><br><span class="line">  (<span class="name"><span class="builtin-name">=</span></span> n (<span class="name">smallest-divisor</span> n))) <span class="comment">;若n的最小整除数等于n，则n是一个素数</span></span><br></pre></td></tr></table></figure></p>
<p>若n能被d整除，则d和n/d不可能都比n的平方根大。换句话说，若n不是素数，则肯定存在一个小于n的平方根的整数d，并且n能被d整除。</p>
<p><strong>方法二：</strong><br>费马小定理(Fermat’s Little Theorem)</p>
<p>计算一个数的n次幂模另一个数<br>(define (expmod base exp m)<br>  (cond ((= exp 0) 1)<br>        ((even? exp)<br>         (remainder<br>         (square (expmod base (/ exp 2) m))<br>         m))<br>        (else<br>         (remainder<br>          (* base (expmod base (- exp 1) m))<br>          m))))</p>
<p>假定random过程已存在<br>(define (fermat-test n)<br>  (define (try-it a)<br>    (= (expmod a n n) a))<br>  (try-it (+ 1 (random (- n 1)))))</p>
<p>(define (fast-prime? n times)<br>  (cond ((= times 0) true)<br>        ((fermat-test n) (fast-prime? n (- times 1)))<br>        (else false)))</p>
<p>概率方法</p>
<h1 id="用高阶函数做抽象"><a href="#用高阶函数做抽象" class="headerlink" title="用高阶函数做抽象"></a>用高阶函数做抽象</h1><p>(1.3 Formulating Abstractions with Higher-Order Procedures)<br>过程（procedure）实际上是一种抽象，它描述了对于数的某种复合操作。</p>
<p>例如：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">cube</span> x) (<span class="name"><span class="builtin-name">*</span></span> x x x))</span><br></pre></td></tr></table></figure></p>
<p>高阶过程是一种更高层次的抽象，可以接收过程作为参数，返回值也可以是过程。</p>
<h2 id="过程作为参数"><a href="#过程作为参数" class="headerlink" title="过程作为参数"></a>过程作为参数</h2><p>(1.3.1 Procedures as Arguments)</p>
<p>过程一：计算给定范围内整数的和<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sum-integers</span> a b)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">&gt;</span></span> a b)</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">      (<span class="name"><span class="builtin-name">+</span></span> a (<span class="name">sum-integers</span> (<span class="name"><span class="builtin-name">+</span></span> a <span class="number">1</span>) b))))</span><br></pre></td></tr></table></figure></p>
<p>过程二：计算给定范围内整数的立方和<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sum-cubes</span> a b)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">&gt;</span></span> a b)</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">      (<span class="name"><span class="builtin-name">+</span></span> (<span class="name">cube</span> a)</span><br><span class="line">         (<span class="name">sum-cubes</span> (<span class="name"><span class="builtin-name">+</span></span> a <span class="number">1</span>) b))))</span><br></pre></td></tr></table></figure></p>
<p>过程三：计算下面序列的和<br>(1/1<em>3) + (1/5</em>7) + (1/9*11) + …<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">pi-sum</span> a b)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">&gt;</span></span> a b)</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">      (<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">/</span></span> <span class="number">1.0</span> (<span class="name"><span class="builtin-name">*</span></span> a (<span class="name"><span class="builtin-name">+</span></span> a <span class="number">2</span>)))</span><br><span class="line">         (<span class="name">pi-sum</span> (<span class="name"><span class="builtin-name">+</span></span> a <span class="number">4</span>) b))))</span><br></pre></td></tr></table></figure></p>
<p>可以看出这三个过程的具有共同的模式：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">&lt;name&gt;</span> a b)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">&gt;</span></span> a b)</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">      (<span class="name"><span class="builtin-name">+</span></span> (<span class="name">&lt;term&gt;</span> a)</span><br><span class="line">         (<span class="name">&lt;name&gt;</span> (<span class="name">&lt;next&gt;</span> a) b))))</span><br></pre></td></tr></table></figure></p>
<p>根据这个模式定义一个高阶过程（函数）<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sum</span> term a next b) <span class="comment">;其中term和next是过程参数</span></span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">&gt;</span></span> a b)</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">      (<span class="name"><span class="builtin-name">+</span></span> (<span class="name">term</span> a)</span><br><span class="line">         (<span class="name">sum</span> term (<span class="name">next</span> a) next b))))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">inc</span> n) (<span class="name"><span class="builtin-name">+</span></span> n <span class="number">1</span>))</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sum-cubes</span> a b)</span><br><span class="line">  (<span class="name">sum</span> cube a inc b))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">identity</span> x) x)</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sum-integers</span> a b)</span><br><span class="line">  (<span class="name">sum</span> identity a inc b))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">pi-sum</span> a b)</span><br><span class="line">  (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">pi-term</span> x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">/</span></span> <span class="number">1.0</span> (<span class="name"><span class="builtin-name">*</span></span> x (<span class="name"><span class="builtin-name">+</span></span> x <span class="number">2</span>))))</span><br><span class="line">  (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">pi-next</span> x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">+</span></span> x <span class="number">4</span>))</span><br><span class="line">  (<span class="name">sum</span> pi-term a pi-next b))</span><br></pre></td></tr></table></figure></p>
<h2 id="用-lambda-构造过程"><a href="#用-lambda-构造过程" class="headerlink" title="用 lambda 构造过程"></a>用 lambda 构造过程</h2><p>(1.3.2 Constructing Procedures Using lambda)</p>
<p>使用lambda表达式代替pi-term 和 pi-next<br>(lambda (x) (+ x 4))<br>(lambda (x) (/ 1.0 (* x (+ x 2))))</p>
<p>使用lambda表达式可以避免再额外定义pi-term 和 pi-next<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">pi-sum</span> a b)</span><br><span class="line">  (<span class="name">sum</span> (<span class="name"><span class="builtin-name">lambda</span></span> (x) (<span class="name"><span class="builtin-name">/</span></span> <span class="number">1.0</span> (<span class="name"><span class="builtin-name">*</span></span> x (<span class="name"><span class="builtin-name">+</span></span> x <span class="number">2</span>))))</span><br><span class="line">       a</span><br><span class="line">       (<span class="name"><span class="builtin-name">lambda</span></span> (x) (<span class="name"><span class="builtin-name">+</span></span> x <span class="number">4</span>))</span><br><span class="line">       b))</span><br></pre></td></tr></table></figure></p>
<p>使用lambda定义匿名过程的语法：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">lambda</span></span> (&lt;formal-parameters&gt;) &lt;body&gt;)</span><br></pre></td></tr></table></figure></p>
<p><strong>lambda表达式用途一：</strong>用作操作符<br>lambda表达式和普通的过程一样可以用作操作符：<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((<span class="name"><span class="builtin-name">lambda</span></span> (x y z) (<span class="name"><span class="builtin-name">+</span></span> x y (<span class="name">square</span> z))) <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<p><strong>lambda表达式用途一：</strong>创建局部变量<br>比如，要计算下面的函数<br>f(x,y) = x(1+ xy)^2 + y(1-y) + (1+xy)(1-y)<br>该函数也可以这样表示：<br>a = 1 + xy,<br>b = 1 - y,<br>f(x,y) = xa^2 + yb + ab.</p>
<p>使用辅助过程绑定局部变量a和b<br>(define (f x y)<br> (define (f-helper a b)<br>   (+ (<em> x (square a))<br>      (</em> y b)<br>      (<em> a b)))<br> (f-helper (+ 1 (</em> x y))<br>           (- 1 y)))</p>
<p>使用匿名过程绑定局部变量a和b<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">f</span> x y)</span><br><span class="line"> ((<span class="name"><span class="builtin-name">lambda</span></span> (a b)</span><br><span class="line">   (<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> x (<span class="name">square</span> a))</span><br><span class="line">      (<span class="name"><span class="builtin-name">*</span></span> y b)</span><br><span class="line">      (<span class="name"><span class="builtin-name">*</span></span> a b)))</span><br><span class="line"> (<span class="name"><span class="builtin-name">+</span></span> <span class="number">1</span> (<span class="name"><span class="builtin-name">*</span></span> x y))</span><br><span class="line"> (<span class="name"><span class="builtin-name">-</span></span> <span class="number">1</span> y)))</span><br></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">((lambda (<span class="tag">&lt;<span class="name">var1</span>&gt;</span> ... <span class="tag">&lt;<span class="name">varn</span>&gt;</span>)</span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span>)</span><br><span class="line"><span class="tag">&lt;<span class="name">exp1</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">expn</span>&gt;</span>)</span><br></pre></td></tr></table></figure>
<p>使用let创建局部变量a和b<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">f</span> x y)</span><br><span class="line">  (<span class="name"><span class="builtin-name">let</span></span> ((<span class="name">a</span> (<span class="name"><span class="builtin-name">+</span></span> <span class="number">1</span> (<span class="name"><span class="builtin-name">*</span></span> x y)))</span><br><span class="line">        (<span class="name">b</span> (<span class="name"><span class="builtin-name">-</span></span> <span class="number">1</span> y)))</span><br><span class="line">  (<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">*</span></span> x (<span class="name">square</span> a))</span><br><span class="line">  (<span class="name"><span class="builtin-name">*</span></span> y b)</span><br><span class="line">  (<span class="name"><span class="builtin-name">*</span></span> a b))))</span><br></pre></td></tr></table></figure></p>
<p>let表达式的语法：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(let ((<span class="tag">&lt;<span class="name">var1</span>&gt;</span> <span class="tag">&lt;<span class="name">exp1</span>&gt;</span>)</span><br><span class="line">      (<span class="tag">&lt;<span class="name">var2</span>&gt;</span> <span class="tag">&lt;<span class="name">exp2</span>&gt;</span>)</span><br><span class="line">      ...</span><br><span class="line">      (<span class="tag">&lt;<span class="name">varn</span>&gt;</span> <span class="tag">&lt;<span class="name">expn</span>&gt;</span>))</span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span>)</span><br></pre></td></tr></table></figure></p>
<p>let表达式仅仅是lambda表达式的语法糖，解释器在处理时会将let表达式转换为lambda表达式。</p>
<h2 id="过程作为一般性的方法"><a href="#过程作为一般性的方法" class="headerlink" title="过程作为一般性的方法"></a>过程作为一般性的方法</h2><p>(1.3.3 Procedures as General Methods)</p>
<p>compound procedures–&gt;higher-order procedures</p>
<p>1、通过区间折半寻找方程f(x)=0的根<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; 给定两个区间点，在在这个区间内查找方程根</span></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">search</span> f neg-point pos-point)</span><br><span class="line">  (<span class="name"><span class="builtin-name">let</span></span> ((<span class="name">midpoint</span> (<span class="name">average</span> neg-point pos-point)))</span><br><span class="line">    (<span class="name"><span class="builtin-name">if</span></span> (<span class="name">close-enough?</span> neg-point pos-point)</span><br><span class="line">        midpoint</span><br><span class="line">        (<span class="name"><span class="builtin-name">let</span></span> ((<span class="name">test-value</span> (<span class="name">f</span> midpoint)))</span><br><span class="line">          (<span class="name"><span class="builtin-name">cond</span></span> ((<span class="name"><span class="builtin-name">positive?</span></span> test-value)</span><br><span class="line">                 (<span class="name">search</span> f neg-point midpoint))</span><br><span class="line">                ((<span class="name"><span class="builtin-name">negative?</span></span> test-value)</span><br><span class="line">                 (<span class="name">search</span> f midpoint pos-point))</span><br><span class="line">                (<span class="name"><span class="builtin-name">else</span></span> midpoint))))))</span><br><span class="line"><span class="comment">; 结束条件</span></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">close-enough?</span> x y) (<span class="name"><span class="builtin-name">&lt;</span></span> (<span class="name"><span class="builtin-name">abs</span></span> (<span class="name"><span class="builtin-name">-</span></span> x y)) <span class="number">0.001</span>))</span><br><span class="line"><span class="comment">; 判断给定的区间是否合适，f(a)和f(b)的值必须是一个大于0，一个小于零</span></span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">half-interval-method</span> f a b)</span><br><span class="line">  (<span class="name"><span class="builtin-name">let</span></span> ((<span class="name">a-value</span> (<span class="name">f</span> a))</span><br><span class="line">        (<span class="name">b-value</span> (<span class="name">f</span> b)))</span><br><span class="line">    (<span class="name"><span class="builtin-name">cond</span></span> ((<span class="name"><span class="builtin-name">and</span></span> (<span class="name"><span class="builtin-name">negative?</span></span> a-value) (<span class="name"><span class="builtin-name">positive?</span></span> b-value))</span><br><span class="line">           (<span class="name">search</span> f a b))</span><br><span class="line">          ((<span class="name"><span class="builtin-name">and</span></span> (<span class="name"><span class="builtin-name">negative?</span></span> b-value) (<span class="name"><span class="builtin-name">positive?</span></span> a-value))</span><br><span class="line">           (<span class="name">search</span> f b a))</span><br><span class="line">          (<span class="name"><span class="builtin-name">else</span></span></span><br><span class="line">           (<span class="name">error</span> <span class="string">"Values are not of opposite sign"</span> a b)))))</span><br></pre></td></tr></table></figure></p>
<p>2、找出函数的不动点(fixed point)<br>若f(x)=x，则x是函数f的不动点。<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> tolerance <span class="number">0.00001</span>)</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">fixed-point</span> f first-guess)</span><br><span class="line">  (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">close-enough?</span> v1 v2)</span><br><span class="line">    (<span class="name"><span class="builtin-name">&lt;</span></span> (<span class="name"><span class="builtin-name">abs</span></span> (<span class="name"><span class="builtin-name">-</span></span> v1 v2))</span><br><span class="line">        tolerance))</span><br><span class="line">  (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">try</span> guess)</span><br><span class="line">    (<span class="name"><span class="builtin-name">let</span></span> ((<span class="name">next</span> (<span class="name">f</span> guess)))</span><br><span class="line">      (<span class="name"><span class="builtin-name">if</span></span> (<span class="name">close-enough?</span> guess next)</span><br><span class="line">          next</span><br><span class="line">          (<span class="name">try</span> next))))</span><br><span class="line">  (<span class="name">try</span> first-guess))</span><br></pre></td></tr></table></figure></p>
<h2 id="过程作为返回值"><a href="#过程作为返回值" class="headerlink" title="过程作为返回值"></a>过程作为返回值</h2><p>(1.3.4 Procedures as Returned Values)</p>
<p>x的平方根是函数f(y)=x/y的不动点。<br>可以用这种思路求x的平方根。<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">average-damp</span> f)</span><br><span class="line">  (<span class="name"><span class="builtin-name">lambda</span></span> (x) (<span class="name">average</span> x (<span class="name">f</span> x))))</span><br><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name"><span class="builtin-name">sqrt</span></span> x)</span><br><span class="line">  (<span class="name">fixed-point</span> (<span class="name">average-damp</span> (<span class="name"><span class="builtin-name">lambda</span></span> (y) (<span class="name"><span class="builtin-name">/</span></span> x y))) <span class="number">1.0</span>))</span><br></pre></td></tr></table></figure></p>
<p>同样地，x的立方根是函数f(y)=x/(y*y)的不动点。<br>可用下面的过程来计算x的立方根。<br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">cube-root</span> x)</span><br><span class="line">  (<span class="name">fixed-point</span> (<span class="name">average-damp</span> (<span class="name"><span class="builtin-name">lambda</span></span> (y) (<span class="name"><span class="builtin-name">/</span></span> x (<span class="name">square</span> y)))) <span class="number">1.0</span>))</span><br></pre></td></tr></table></figure></p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/06/数据结构和算法_11_红黑树/" rel="next" title="11_红黑树">
                <i class="fa fa-chevron-left"></i> 11_红黑树
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/26/SICP笔记_01_练习/" rel="prev" title="SICP练习_01">
                SICP练习_01 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">wangzk1900</p>
              <div class="site-description motion-element" itemprop="description">记录学习总结和思考</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/wangzk1900" title="GitHub &rarr; https://github.com/wangzk1900" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:wangzk1900@gmail.com" title="E-Mail &rarr; mailto:wangzk1900@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#程序设计的基本元素"><span class="nav-number">1.</span> <span class="nav-text">程序设计的基本元素</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#表达式"><span class="nav-number">1.1.</span> <span class="nav-text">表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名和环境"><span class="nav-number">1.2.</span> <span class="nav-text">命名和环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组合式求值"><span class="nav-number">1.3.</span> <span class="nav-text">组合式求值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#复合过程"><span class="nav-number">1.4.</span> <span class="nav-text">复合过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过程应用的代换模型"><span class="nav-number">1.5.</span> <span class="nav-text">过程应用的代换模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#条件表达式和谓词"><span class="nav-number">1.6.</span> <span class="nav-text">条件表达式和谓词</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实例：采用牛顿法求平方根"><span class="nav-number">1.7.</span> <span class="nav-text">实例：采用牛顿法求平方根</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过程作为黑箱抽象"><span class="nav-number">1.8.</span> <span class="nav-text">过程作为黑箱抽象</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#过程与它们所产生的计算步骤"><span class="nav-number">2.</span> <span class="nav-text">过程与它们所产生的计算步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#线性的递归和迭代"><span class="nav-number">2.1.</span> <span class="nav-text">线性的递归和迭代</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#树形递归"><span class="nav-number">2.2.</span> <span class="nav-text">树形递归</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#增长的阶"><span class="nav-number">2.3.</span> <span class="nav-text">增长的阶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#求幂"><span class="nav-number">2.4.</span> <span class="nav-text">求幂</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#最大公约数"><span class="nav-number">2.5.</span> <span class="nav-text">最大公约数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实例：素数检测"><span class="nav-number">2.6.</span> <span class="nav-text">实例：素数检测</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#用高阶函数做抽象"><span class="nav-number">3.</span> <span class="nav-text">用高阶函数做抽象</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#过程作为参数"><span class="nav-number">3.1.</span> <span class="nav-text">过程作为参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-lambda-构造过程"><span class="nav-number">3.2.</span> <span class="nav-text">用 lambda 构造过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过程作为一般性的方法"><span class="nav-number">3.3.</span> <span class="nav-text">过程作为一般性的方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过程作为返回值"><span class="nav-number">3.4.</span> <span class="nav-text">过程作为返回值</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wangzk1900</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  


  


  




  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

    
  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
